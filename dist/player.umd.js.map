{"version":3,"file":"player.umd.js","sources":["../../songcheat-core/src/utils.js","../../songcheat-core/src/parser.js","../../songcheat-core/src/compiler.js","../../songcheat-core/node_modules/@mohayonao/wave-tables/index.js","../../songcheat-core/src/player.js","../src/player.js"],"sourcesContent":["export class Utils {\n  /**\n   * Array helper functions\n   */\n\n  static arraysEqual (a, b) {\n    if (a === b) return true\n    if (a === null || b === null) return false\n    if (a.length !== b.length) return false\n    for (var i = 0; i < a.length; ++i) {\n      if (a[i] !== b[i]) return false\n    }\n    return true\n  }\n\n  /**\n   * String helper functions\n   */\n\n  static title (str) {\n    return '\\n' + this.spaces(str.length + 8, '*') + '\\n*** ' + str + ' ***\\n' + this.spaces(str.length + 8, '*') + '\\n'\n  }\n\n  static firstUpper (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1)\n  }\n\n  static camelCase (s, firstUpper) {\n    var camel = s.toLowerCase().replace(/(?:[-_])(.)/g, function (match, group1) { return group1.toUpperCase() })\n    return firstUpper ? camel.charAt(0).toUpperCase() + camel.slice(1) : camel\n  }\n\n  static spaces (length, char) {\n    if (isNaN(length) || !isFinite(length) || length < 0) throw new Error('Length must a positive finite number')\n    var s = ''\n    for (var i = 0; i < length; i++) s += char || ' '\n    return s\n  }\n\n  static replaceComposedChars (s) {\n    // fix composed UTF8 characters (not handled correctly by ACE when typing a newline after one of those)\n    // http://php.net/manual/fr/regexp.reference.unicode.php\n    // http://www.fileformat.info/info/unicode/category/Mn/list.htm\n\n    s = s.replace(/a\\u0300/g, 'à')\n    s = s.replace(/e\\u0300/g, 'è')\n    s = s.replace(/e\\u0301/g, 'é')\n    s = s.replace(/e\\u0302/g, 'ê')\n    s = s.replace(/i\\u0302/g, 'î')\n    s = s.replace(/o\\u0302/g, 'ô')\n    s = s.replace(/u\\u0302/g, 'û')\n    s = s.replace(/a\\u0302/g, 'â')\n    s = s.replace(/o\\u0303/g, 'õ')\n    s = s.replace(/a\\u0303/g, 'ã')\n\n    return s\n  }\n\n  /**\n   * Interlace two multi line strings: one line of each file in alternance\n   * If the second file contains more line then the first one, these additional lines will be ignored\n   **/\n\n  static interlace (text1, text2, sepLine, keepEmptyLines) {\n    var a1 = text1.split(/\\r?\\n/)\n    var a2 = text2.split(/\\r?\\n/)\n    var a = a1.map(function (v, i) {\n      let lines = keepEmptyLines || (a2[i] && a2[i].trim()) ? [v, a2[i]] : [v]\n      if (typeof sepLine === 'string') lines.push(sepLine)\n      return lines.join('\\n')\n    })\n    return a.join('\\n')\n  }\n\n  /**\n   * Encode given parameters as a GET query string\n   **/\n\n  static encodeQueryData (data) {\n    let ret = []\n    for (let d in data) { ret.push(encodeURIComponent(d) + '=' + encodeURIComponent(data[d])) }\n    return ret.join('&')\n  }\n\n  /**\n   * Convert a duration code to the smallest unit (64th)\n   **/\n\n  static duration (code) {\n    if (code === ':32') return 2\n    if (code === ':16') return 4\n    if (code === ':8') return 8\n    if (code === ':q') return 16\n    if (code === ':h') return 32\n    if (code === ':w') return 64\n\n    if (code === ':32d') return 3\n    if (code === ':16d') return 6\n    if (code === ':8d') return 12\n    if (code === ':qd') return 24\n    if (code === ':hd') return 48\n    if (code === ':wd') return 96\n\n    throw new Error('Invalid duration code \"' + code + '\"')\n  }\n\n  /**\n   * Convert back a number of units (64th) into a duration code\n   **/\n\n  static durationcode (units) {\n    for (let code of ['w', 'h', 'q', '8', '16', '32']) {\n      if (this.duration(':' + code) === units) return ':' + code\n      if (this.duration(':' + code + 'd') === units) return ':' + code + 'd'\n    }\n\n    throw new Error('Could not find a code with a value of ' + units + ' units')\n  }\n\n  /**\n   * Convert a number of units (64th) into one or several duration codes\n   **/\n\n  static durationcodes (units) {\n    var codes = []\n\n    var current = units\n    var rest = 0\n\n    while (current > 0) {\n      try {\n        codes.push(this.durationcode(current))\n        current = rest\n        rest = 0\n      } catch (e) {\n        current--\n        rest++\n      }\n    }\n\n    if (rest > 0) throw new Error('Could not find codes adding to a value of ' + units + ' units')\n\n    return codes\n  }\n\n  /**\n   * Convert a fret number (up to 35) to a single char (digit or capital letter)\n   * Fret 10 is notated as A, 11 as B, ... and 35 as Z\n   */\n\n  static fret2char (fret) {\n    if (isNaN(fret) || fret < 0 || fret > 35) throw new Error('Cannot convert fret number ' + fret + ' to a single char (expected a value between 0 and 35)')\n    return fret < 10 ? '' + fret : String.fromCharCode('A'.charCodeAt(0) + fret - 10)\n  }\n\n  /**\n   * Convert a single char (digit or capital letter) to a fret number\n   * A means fret 10, 11 fret B, ... and Z fret 35\n   */\n\n  static char2fret (char) {\n    if (typeof char !== 'string') throw new Error('Invalid fret char ' + char + ' expected a string')\n    if (!char.match(/^[0-9A-Z]$/)) throw new Error('Invalid fret char ' + char + ' (expected a value between [0-9] or [A-Z])')\n    return char >= 'A' ? 10 + char.charCodeAt(0) - 'A'.charCodeAt(0) : parseInt(char, 10)\n  }\n\n  /**\n   * Convert an absolute fret number (single char) to a relative fret number (0 never changes)\n   */\n\n  static abs2rel (char, startingFret) {\n    let fret = this.char2fret(char)\n    if (isNaN(fret) || fret < 0) throw new Error('Invalid fret number ' + fret + ' (expected a positive or 0 integer value)')\n    if (fret === 0) return 0\n    if (isNaN(startingFret) || startingFret < 0) throw new Error('Invalid starting fret number ' + startingFret + ' (expected a positive or 0 integer value)')\n    if (startingFret + 8 < fret || startingFret > fret) throw new Error('Fret ' + fret + ' cannot be made relative to starting fret ' + startingFret + ' within the allowed range of 1 to 9')\n    return fret + 1 - startingFret\n  }\n\n  /**\n   * Convert a relative fret number to an absolute fret number (single char) (0 never changes)\n   */\n\n  static rel2abs (relFret, startingFret) {\n    return this.fret2char(relFret ? relFret + startingFret - 1 : relFret)\n  }\n\n  /**\n   * Take a chord and a placeholder contents\n   * Return an array containing one object { string, fret, mute } for each played string\n   */\n\n  static chordStrings (chord, strings) {\n    if (!chord.tablature) throw new Error('Tablature not defined for chord ' + chord.name)\n    if (!chord.fingering) throw new Error('Fingering not defined for chord ' + chord.name)\n\n    var result = []\n    for (var i = 0; i < chord.tablature.length; i++) {\n      // string will be between 6 and 1 since chord.tablature.length has been verified and is 6\n      var string = 6 - i\n\n      // string never played in this chord\n      if (chord.tablature[i] === 'x') continue\n\n      // first time we meet a played string, it's the bass so replace B and B' with the string number\n      strings = strings.replace(/B'/g, (string >= 5 ? string - 1 : string))\n      strings = strings.replace(/B/g, string)\n\n      // check if this string should be played with the right hand\n      // * means \"all strings\", otherwise concatenated specific string numbers are specified (or B for bass or B' for alternate bass)\n      // x after string means muted (ghost) note\n      if (strings.match(/^\\*/) || strings.indexOf(string) !== -1) {\n        let fret = this.char2fret(chord.tablature[i])\n        let xIndex = strings.match(/^\\*/) ? 1 : strings.indexOf(string) + 1\n        let mute = strings[xIndex] === 'x'\n        result.push({\n          string: string,\n          fret: fret,\n          mute: mute\n        })\n      }\n    }\n\n    return result\n  }\n}\n","import { Utils } from './utils'\n\nexport class ParserException {\n  constructor (line, message) {\n    this.message = message\n    this.line = line\n  }\n\n  toString () {\n    return 'Parser error at line ' + this.line + ': ' + this.message\n  }\n}\n\nclass Parser_ {\n  constructor () {\n    this.songcheat = {}\n    this.blocks = {}\n  }\n\n  parse (text) {\n    // reset\n    this.songcheat = {}\n    this.blocks = {}\n\n    // split text into tokens\n    let tokens = this.tokenize(text)\n    if (tokens.length === 0) return this.songcheat\n\n    let tokenIndex = 0\n    while (tokenIndex < tokens.length) {\n      let token = tokens[tokenIndex]\n      let keyword = this.isKeyword(token)\n\n      // we must be on a keyword, otherwise it means that first token in text is not a keyword as expected\n      if (!keyword) throw new ParserException(token.line, 'expected keyword, found \"' + token.value + '\"')\n\n      // get all tokens until next keyword or end\n      let params = []\n      for (++tokenIndex; tokenIndex < tokens.length; ++tokenIndex) {\n        if (this.isKeyword(tokens[tokenIndex])) break\n        params.push(tokens[tokenIndex])\n      }\n\n      // use specific handler if any or default one\n      let handler = this['handle' + Utils.firstUpper(keyword)] || this.handleDefault\n      if (typeof handler === 'function') handler.call(this, token.line, keyword, params)\n      else throw new ParserException(token.line, 'non function handler found for keyword ' + keyword)\n    }\n\n    return this.songcheat\n  }\n\n  getPrecedingKeyword (text, line) {\n    // reset\n    this.songcheat = {}\n    this.blocks = {}\n\n    let lastResult = null\n\n    // split text into tokens\n    let tokens = this.tokenize(text)\n    if (tokens.length === 0) return true\n\n    let tokenIndex = 0\n    while (tokenIndex < tokens.length) {\n      let token = tokens[tokenIndex]\n      let keyword = this.isKeyword(token)\n\n      if (token.line > line) return lastResult\n\n      // we must be on a keyword, otherwise it means that first token in text is not a keyword as expected\n      if (!keyword) throw new ParserException(token.line, 'expected keyword, found \"' + token.value + '\"')\n\n      // get all tokens until next keyword or end\n      let params = []\n      for (++tokenIndex; tokenIndex < tokens.length; ++tokenIndex) {\n        if (this.isKeyword(tokens[tokenIndex])) break\n        params.push(tokens[tokenIndex])\n      }\n\n      // use specific handler if any or default one\n      let handler = this['handle' + Utils.firstUpper(keyword)] || this.handleDefault\n      if (typeof handler === 'function') handler.call(this, token.line, keyword, params)\n      else throw new ParserException(token.line, 'non function handler found for keyword ' + keyword)\n\n      lastResult = { line: token.line, keyword: keyword, params: params, chordIndex: null, rhythmIndex: null, partIndex: null, unitIndex: null }\n\n      if (keyword === 'chord') lastResult.chordIndex = this.songcheat.chords.length - 1\n      else if (keyword === 'rhythm') lastResult.rhythmIndex = this.songcheat.rhythms.length - 1\n      else if (keyword === 'part') lastResult.partIndex = this.songcheat.parts.length - 1\n      else if (keyword === 'structure') {\n        // special case since there is no distinct UNIT keyword for each unit, but a single STRUCTURE keyword for all units\n        let paramIndex = 0\n        for (let param of params) {\n          if (param.line > line) break\n          lastResult.unitIndex = Math.floor(paramIndex / 2)\n          paramIndex++\n        }\n      }\n    }\n\n    return lastResult\n  }\n\n  isKeyword (token) {\n    let keyword = Utils.camelCase(token.value)\n    return ['artist', 'title', 'year', 'difficulty', 'video', 'tutorial', 'comment', 'tuning', 'capo', 'key', 'time', 'tempo', 'shuffle', 'chord', 'rhythm', 'block', 'part', 'lyricsUnit' /* will disappear soon */, 'structure'].indexOf(keyword) >= 0 ? keyword : false\n  }\n\n  tokenize (text) {\n    let tokens = []\n\n    // https://stackoverflow.com/questions/4780728/regex-split-string-preserving-quotes?noredirect=1&lq=1\n    let reSpaces = /(?<=^[^\"]*(?:\"[^\"]*\"[^\"]*)*)[\\s\\t]+(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/\n    let reNewline = /(?<=^[^\"]*(?:\"[^\"]*\"[^\"]*)*)(\\r?\\n)(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/\n\n    let lineNumber = 1\n\n    // split at newlines unless enclosed in quotes\n    for (let line of text.split(reNewline)) {\n      // split also returns the newlines, ignore them\n      if (line.match(/^\\r?\\n$/)) continue\n\n      // trim line\n      line = line.trim()\n\n      // console.log(\"L\" + lineNumber + \": [\"+ line + \"]\");\n\n      // if not a comment or empty line\n      if (line && !line.match(/^#/)) {\n        // split at spaces and tabs unless enclosed in quotes, then trim spaces and quotes\n        for (let value of line.split(reSpaces).map(s => s.trim().replace(/^\"|\"$/g, ''))) tokens.push({ 'value': value, 'line': lineNumber })\n      }\n\n      // increment line number\n      lineNumber += (1 + (line.match(/(?:\\r?\\n)/g) || []).length)\n    }\n\n    return tokens\n  }\n\n  handleDefault (line, keyword, params) {\n    if (params.length !== 1) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 1 value, but found ' + params.length)\n    this.songcheat[keyword] = ['year', 'capo', 'difficulty'].indexOf(keyword) >= 0 ? parseInt(params[0].value, 10) : params[0].value\n  }\n\n  handleSignature (line, keyword, params) {\n    if (params.length !== 1) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 1 value, but found ' + params.length)\n    this.songcheat['signature'] = this.songcheat['signature'] || {}\n    this.songcheat['signature'][keyword] = keyword === 'tempo' ? parseFloat(params[0].value, 10) : params[0].value\n  }\n\n  handleKey (line, keyword, params) { return this.handleSignature(line, keyword, params) }\n  handleTempo (line, keyword, params) { return this.handleSignature(line, keyword, params) }\n  handleShuffle (line, keyword, params) { return this.handleSignature(line, keyword, params) }\n\n  handleTime (line, keyword, params) {\n    if (params.length !== 3) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 3 values, but found ' + params.length)\n    this.songcheat['signature'] = this.songcheat['signature'] || []\n    this.songcheat['signature']['time'] = { 'beatsPerBar': params[1].value, 'beatDuration': params[2].value, 'symbol': params[0].value }\n  }\n\n  handleChord (line, keyword, params) {\n    if (params.length < 2 || params.length > 4) throw new ParserException(line, keyword.toUpperCase() + ' expected between 2 and 4 values (name, tablature[, fingering=\"000000/-\", comment=\"\"]), but found ' + params.length)\n\n    let name = params[0].value\n    let tablature = params[1].value\n    let fingering = params.length >= 3 ? params[2].value : '000000/-'\n    let comment = params.length >= 4 ? params[3].value : ''\n\n    this.songcheat['chords'] = this.songcheat['chords'] || []\n    let chord = { 'id': this.songcheat['chords'].length + 1, 'name': name, 'tablature': tablature, 'fingering': fingering, 'comment': comment }\n    this.songcheat['chords'].push(chord)\n\n    // return created chord (used when meeting an inline chord)\n    return chord\n  }\n\n  handleRhythm (line, keyword, params) {\n    if (params.length !== 2) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 2 values (id and score), but found ' + params.length)\n    this.songcheat['rhythms'] = this.songcheat['rhythms'] || []\n    this.songcheat['rhythms'].push({ 'id': this.songcheat['rhythms'].length + 1, 'name': params[0].value, 'score': params[1].value })\n  }\n\n  handleBlock (line, keyword, params) {\n    if (params.length < 2) throw new ParserException(line, keyword.toUpperCase() + ' expected at least 2 values (name and bar(s)), but found ' + params.length)\n    this.blocks[params[0].value] = params.slice(1)\n  }\n\n  handlePart (line, keyword, params) {\n    if (params.length < 2) throw new ParserException(line, keyword.toUpperCase() + ' expected at least 2 values (name and bar(s)), but found ' + params.length)\n    this.songcheat['parts'] = this.songcheat['parts'] || []\n\n    // extract part name from params\n    let part = { 'id': this.songcheat['parts'].length + 1, 'name': params[0].value, 'phrases': [] }\n    params = params.splice(1)\n    this.songcheat['parts'].push(part)\n\n    // iterate on remaining params to get bars and phrases\n    let bars = []\n    for (let pIndex = 0; pIndex < params.length; pIndex++) {\n      let param = params[pIndex]\n\n      // phrase separator\n      if (param.value === '||') {\n        part.phrases.push({ 'bars': bars })\n        bars = []\n        continue\n      }\n\n      // bar repeater\n      if (param.value === '%') {\n        if (bars.length === 0) throw new ParserException(param.line, 'found bar repeater ' + param.value + ' but there is no bar yet in phrase')\n        bars.push(JSON.parse(JSON.stringify(bars[bars.length - 1])))\n        continue\n      }\n\n      // bar between []\n      if (param.value.match(/^\\[[^[\\]]+\\]$/)) {\n        let bar = { 'rhythm': null, 'chords': [] }\n        let str = param.value.substr(1, param.value.length - 2)\n        let parts = str.split(/\\*|:/)\n\n        // find rhythm\n        let found = false\n        for (let rhythm of this.songcheat['rhythms']) {\n          if (rhythm.name === parts[0]) {\n            bar.rhythm = rhythm.id\n            found = true\n            break\n          }\n        }\n\n        if (!found) throw new ParserException(param.line, parts[0] + ' is not the name of an existing rhythm')\n\n        // find chords\n        parts = parts.slice(1)\n        for (let part of parts) {\n          // chord repeater\n          if (!part.trim()) {\n            if (bar.chords.length === 0) throw new ParserException(param.line, 'found chord repeater but there is no chord yet in bar')\n            bar.chords.push(JSON.parse(JSON.stringify(bar.chords[bar.chords.length - 1])))\n            continue\n          }\n\n          // search for chord by its name\n          let found = false\n          for (let chord of this.songcheat['chords']) {\n            if (chord.name === part) {\n              bar.chords.push(chord.id)\n              found = true\n              break\n            }\n          }\n\n          // if no chord found with this name but this is a valid chord tablature (with an optional barred fret /[-0-9A-Z])\n          if (!found && part.match(/^[x0-9A-Z]{6}(\\/[-0-9A-Z])?$/)) {\n            // create inline chord with the name being the tablature itself, and no fingering nor comment\n            let chord = this.handleChord(param.line, 'chord', [{ value: part, line: param.line }, { value: part.split('/')[0], line: param.line }, { value: '000000/' + (part.split('/')[1] || '-'), line: param.line }])\n            bar.chords.push(chord.id)\n            found = true\n          }\n\n          if (!found) throw new ParserException(param.line, part + ' is not the name of an existing chord and is not a valid chord tablature')\n        }\n\n        bars.push(bar)\n        continue\n      }\n\n      // not a || phrase separator nor a [] bar: must be a block name\n      if (!this.blocks[param.value]) throw new ParserException(param.line, param.value + ' is not the name of an existing block')\n\n      // insert block tokens in params at current position\n      let args = [pIndex, 1]\n      Array.prototype.push.apply(args, this.blocks[param.value])\n      Array.prototype.splice.apply(params, args)\n      pIndex--\n    }\n\n    // end of last phrase\n    if (bars.length > 0) part.phrases.push({ 'bars': bars })\n  }\n\n  handleStructure (line, keyword, params) {\n    if (params.length < 2) throw new ParserException(line, keyword.toUpperCase() + ' expected at least 2 values (part name and lyrics), but found ' + params.length)\n    if (params.length % 2 !== 0) throw new ParserException(line, keyword.toUpperCase() + ' expected an even number of parameters (N x part name and lyrics), but found ' + params.length)\n    this.songcheat['structure'] = this.songcheat['structure'] || []\n\n    for (let pIndex = 0; pIndex < params.length; pIndex += 2) {\n      let param = params[pIndex]\n\n      let found = false\n      for (let part of this.songcheat['parts']) {\n        if (part.name === param.value) {\n          this.songcheat['structure'].push({ 'id': this.songcheat['structure'].length + 1, 'part': part.id, 'lyrics': params[pIndex + 1].value })\n          found = true\n          break\n        }\n      }\n\n      if (!found) throw new ParserException(param.line, param.value + '\" is not the name of an existing part')\n    }\n  }\n}\n\n/**\n * Public API\n */\n\nexport class Parser {\n  constructor () {\n    this.parser_ = new Parser_()\n  }\n\n  parse (songcheat) {\n    return this.parser_.parse(songcheat)\n  }\n\n  getPrecedingKeyword (songcheat, line) {\n    return this.parser_.getPrecedingKeyword(songcheat, line)\n  }\n}\n","import { Utils } from './utils'\n\nlet MIN_LYRICS_BARLEN = 20 // minimum length of a bar lyrics (before reducing) - not really needed but produces a clearer view when maxConsecutiveSpaces set to 0 (and thus when displaying parts with partdisplay=full) since bars with no or little text will have the same length (unless there are really many chord changes...)\nlet LYRICS_SUM_DURATIONS = false // if true \"::\" is equivalent to \":h:\" (assuming lyrics unit is :q)\nlet KEEP_EMPTY_LINES = false\n\nexport class CompilerException {\n  constructor (message) {\n    this.message = message\n  }\n\n  toString () {\n    return 'Compiler error: ' + this.message\n  }\n}\n\nclass Compiler_ {\n  constructor (DEBUG) {\n    // DEBUG 1 forces showing . * | characters in unit text (even if showDots is passed false) as well as _ for groups that were automatically created when crossing a bar\n    this.DEBUG = DEBUG\n  }\n\n  log () {\n    if (this.DEBUG > 0) console.log.apply(console, arguments)\n  }\n\n  compile (songcheat) {\n    // default values for optional properties\n    songcheat.mode = songcheat.mode || 'rt'\n    songcheat.lyricsMode = songcheat.lyricsMode || 's'\n    songcheat.barsPerLine = songcheat.barsPerLine || 4\n    songcheat.signature = songcheat.signature || {}\n    songcheat.signature.key = songcheat.signature.key || 'C'\n    songcheat.signature.time = songcheat.signature.time || { beatDuration: ':q', beatsPerBar: 4, symbol: '4/4' }\n    songcheat.lyricsUnit = songcheat.lyricsUnit || songcheat.signature.time.beatDuration\n    songcheat.chords = songcheat.chords || []\n    songcheat.rhythms = songcheat.rhythms || []\n    songcheat.parts = songcheat.parts || []\n\n    // deduce bar duration from signature\n    songcheat.barDuration = songcheat.signature.time.beatsPerBar * Utils.duration(songcheat.signature.time.beatDuration)\n\n    // resolve all id references (rhythms and chords)\n    this.resolveIds(songcheat)\n\n    // default structure if not specified : one unit for each part\n    if (!songcheat.structure) {\n      songcheat.structure = []\n      for (let part of songcheat.parts) songcheat.structure.push({ 'part': part })\n    }\n\n    // give a name to each unit if not already set = name of part with automatic numbering\n    let unitsByPart = {}\n    let numberByPart = {}\n    for (let unit of songcheat.structure) unitsByPart[unit.part.id] = typeof unitsByPart[unit.part.id] === 'undefined' ? 1 : unitsByPart[unit.part.id] + 1\n    for (let unit of songcheat.structure) {\n      numberByPart[unit.part.id] = typeof numberByPart[unit.part.id] === 'undefined' ? 1 : numberByPart[unit.part.id] + 1\n      if (!unit.name) unit.name = unit.part.name + (unitsByPart[unit.part.id] > 1 ? ' ' + numberByPart[unit.part.id] : '')\n    }\n\n    // give a color to each part if not already set\n    let colors = ['red', '#06D6A0', 'blue', 'purple', 'orange', 'magenta']\n    let partIndex = 0\n    for (let part of songcheat.parts) { if (!part.color) part.color = colors[partIndex++ % colors.length] }\n\n    // validate and compile each rhythm\n    for (let rhythm of songcheat.rhythms) this.compileRhythm(rhythm, songcheat.signature.time.beatDuration)\n\n    for (let part of songcheat.parts) {\n      // compute a \"chordChanges\" property in each phrase\n      let phraseIndex = 0\n      for (let phrase of part.phrases) {\n        phrase.chordChanges = []\n        let lastChord = null\n        for (let bar of phrase.bars) lastChord = this.addChordChanges(bar, phrase.chordChanges, songcheat.barDuration, false, lastChord)\n\n        this.log('Phrase wise chord durations for phrase ' + part.name + '.' + (phraseIndex + 1))\n        for (let c of phrase.chordChanges) this.log('\\t[' + c.chord.name + '] = ' + c.duration + ' units')\n\n        // compute a \"chordChanges\" property in each bar\n        let barIndex = 0\n        for (let bar of phrase.bars) {\n          bar.chordChanges = { 'bar': [], 'rhythm': [] }\n          for (let chordChangesMode of ['rhythm', 'bar']) this.addChordChanges(bar, bar.chordChanges[chordChangesMode], songcheat.barDuration, chordChangesMode === 'bar')\n\n          this.log('\\tRythm wise chord durations for bar ' + part.name + '.' + (phraseIndex + 1) + '.' + (barIndex + 1))\n          for (let c of bar.chordChanges['rhythm']) this.log('\\t\\t[' + c.chord.name + '] = ' + c.duration + ' units')\n          this.log('\\tBar wise chord durations for bar ' + part.name + '.' + (phraseIndex + 1) + '.' + (barIndex + 1))\n          for (let c of bar.chordChanges['bar']) this.log('\\t\\t[' + c.chord.name + '] = ' + c.duration + ' units')\n\n          barIndex++\n        }\n\n        phraseIndex++\n      }\n\n      // compute duration of part\n      part.duration = 0\n      for (let phrase of part.phrases) { for (let bar of phrase.bars) part.duration += bar.rhythm.duration }\n    }\n\n    // fluid API\n    return songcheat\n  }\n\n  resolveIds (songcheat) {\n    let unitIndex = 0\n    if (songcheat.structure) {\n      for (let unit of songcheat.structure) {\n        if (!unit.part) throw new CompilerException('Part not defined for unit ' + (unitIndex + 1))\n\n      // resolve part id\n        let part = this.resolveId(songcheat.parts, unit.part)\n        if (!part) throw new CompilerException('Part ' + unit.part + ' not found')\n        unit.part = part\n\n        unitIndex++\n      }\n    }\n\n    if (songcheat.parts) {\n      for (let part of songcheat.parts) {\n        if (!part.phrases) throw new CompilerException('Phrases not defined for part \"' + part.name + '\"')\n        if (!(part.phrases instanceof Array)) throw new CompilerException('Phrases defined for part \"' + part.name + '\" must be an Array, found: ' + (typeof songcheat.parts.phrases))\n\n        let phraseIndex = 0\n        for (let phrase of part.phrases) {\n          let barIndex = 0\n          for (let bar of phrase.bars) {\n            if (!bar.rhythm) throw new CompilerException('Rhythm not defined for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1) + ' of ' + part.name)\n            if (!bar.chords) throw new CompilerException('Chords not defined for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1) + ' of ' + part.name)\n            if (!(bar.chords instanceof Array)) throw new CompilerException('Chords defined for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1) + ' must be an Array, found: ' + (typeof bar.chords))\n\n          // resolve rhythm id\n            let rhythm = this.resolveId(songcheat.rhythms, bar.rhythm)\n            if (!rhythm) throw new CompilerException('Rhythm ' + bar.rhythm + ' not found for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1))\n            bar.rhythm = rhythm\n\n          // resolved array of chord ids\n            let chords = []\n            for (let chordId of bar.chords) {\n            // resolve chord id\n              let chord = this.resolveId(songcheat.chords, chordId)\n              if (!chord) throw new CompilerException('Chord ' + chordId + ' not found for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1))\n              chords.push(chord)\n            }\n\n            bar.chords = chords\n            barIndex++\n          }\n\n          phraseIndex++\n        }\n      }\n    }\n  }\n\n  resolveId (collection, id) {\n    if (collection) { for (let i of collection) { if (i.id === id) return i } }\n    return null\n  }\n\n  compileRhythm (rhythm, initialNoteDuration) {\n    this.log('Compiling rhythm ' + rhythm.id + ' with score \"' + rhythm.score + '\"')\n\n    // default note duration, until changed\n    let noteDuration = initialNoteDuration\n\n    // take not of each placeholder's index, so we can later fetch the associated chord\n    rhythm.placeholdercount = 0\n\n    // for locating syntax errors in message\n    let position = 1\n    let lastToken = null\n\n    // compile the score string into an array of objects\n    rhythm.compiledScore = []\n    for (let token of rhythm.score.split(/((?::(?:w|h|q|8|16|32)d?)|\\(#\\)|T?\\s*\\([^(]*\\)[^()\\sT:]*)/)) {\n      if ((token = token.trim())) {\n        let match = null\n        if ((match = token.match(/^(:(?:w|h|q|8|16|32)d?)$/))) {\n          // duration: change note duration to use next\n          noteDuration = Utils.duration(match[1])\n        } else if ((match = token.match(/^\\(#\\)$/))) {\n          // rest\n          rhythm.compiledScore.push({ rest: true, duration: noteDuration, tied: false, strings: false, flags: {}, placeholderIndex: rhythm.placeholdercount++ })\n        } else if ((match = token.match(/^(T?)\\s*\\(([^(]*)\\)([^()\\s]*)$/))) {\n          // chord placeholder\n          let tied = match[1] === 'T'\n\n          // strings = between parentheses\n          let strings = match[2]\n          if (strings === '') strings = '*' // an empty string is a shortcut for \"*\"\n          if (strings === 'x') strings = '*x' // a x alone is a shortcut for \"*x\"\n          if (!strings.match(/^(?:(\\*x?)|((?:(?:B|B'|1|2|3|4|5|6)x?)+))$/)) throw new CompilerException('Invalid syntax found in chord placeholder: ' + strings)\n\n          // flags = after parentheses\n          let flagsString = match[3]\n          let flags = { stroke: null, accent: false, pm: false, fingering: null }\n          for (let flag of flagsString.split(/(dd?|uu?|>|PM|[pima]+)/)) {\n            if (flag.trim()) {\n              if (flag.match(/^(dd?|uu?)$/g)) {\n                // stroke mode\n                if (flags.fingering) throw new CompilerException('Fingering (' + flags.fingering + ') and stroke (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.pm) throw new CompilerException('Palm muting (PM) and stroke (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.stroke) throw new CompilerException('More than one stroke mode (d, u, dd, uu) defined for the chord placeholder: ' + token)\n                flags.stroke = flag\n              } else if (flag.match(/^[pima]+$/)) {\n                // PIMA fingering\n                if (flags.stroke) throw new CompilerException('Stroke (' + flags.stroke + ') and fingering (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.pm) throw new CompilerException('Palm muting (PM) and fingering (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.fingering) throw new CompilerException('More than one fingering (pima) defined for the chord placeholder: ' + token)\n                flags.fingering = flag\n              } else if (flag.match(/^PM$/)) {\n                // palm muting\n                if (flags.stroke) throw new CompilerException('Stroke (' + flags.stroke + ') and palm muting (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.fingering) throw new CompilerException('Fingering (' + flags.fingering + ') and palm muting (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.pm) throw new CompilerException('More than one palm muting (PM) defined for the chord placeholder: ' + token)\n                flags.pm = true\n              } else if (flag.match(/^>$/)) {\n                // accent\n                if (flags.accent) throw new CompilerException('More than one accent (>) defined for the same placeholder: ' + token)\n                flags.accent = true\n              } else throw new CompilerException('Invalid flag \"' + flag + '\" defined for chord placeholder \"' + token + '\"')\n            }\n          }\n\n          // add a note\n          rhythm.compiledScore.push({ rest: false, duration: noteDuration, tied: tied, strings: strings, flags: flags, placeholderIndex: rhythm.placeholdercount++ })\n        } else throw new CompilerException('Invalid token \"' + token + '\" in rhythm score definition at position ' + position + (lastToken ? ' (after \"' + lastToken + '\")' : ''))\n\n        lastToken = token\n      }\n\n      position += token.length\n    }\n\n    // compute total rhythm duration\n    rhythm.duration = 0\n    for (let o of rhythm.compiledScore) rhythm.duration += o.duration\n  }\n\n  addChordChanges (bar, chordChanges, barDuration, resetAtBars, lastChord) {\n    // ensure number of chords match number of placeholders in rhythm score, by repeating last chord\n    if (bar.chords.length < 1) throw new CompilerException('chords must contain at least 1 entry, but ' + bar.chords.length + ' were found')\n    while (bar.chords.length < bar.rhythm.placeholdercount) bar.chords.push(bar.chords[bar.chords.length - 1])\n\n    let offset = 0\n    for (let note of bar.rhythm.compiledScore) {\n      // get chord corresponding to the placeholder position\n      let chord = bar.chords[note.placeholderIndex]\n      if (!chord) throw new CompilerException('No chord found for placeholder ' + (note.placeholderIndex + 1))\n\n      // same chord as before and not a new bar: increment duration with this new note\n      if (lastChord === chord && offset % barDuration !== 0) chordChanges[chordChanges.length - 1].duration += note.duration\n\n      // chord changed: new duration starts with one note of the new chord\n      // unless requested to reset chords at bars, chord change will be hidden if still the same as before\n      else chordChanges.push({ chord: chord, duration: note.duration, hidden: lastChord === chord && !resetAtBars })\n\n      lastChord = chord\n      offset += note.duration\n    }\n\n    return lastChord\n  }\n\n  parseLyrics (unit, defaultCursorStep, barDuration) {\n    let warnings = []\n    let offset = 0\n\n    // remove DOS newlines\n    unit.lyrics = (unit.lyrics || '').replace(/\\r/g, '')\n\n    // split lyrics into word groups, split occurs at cursor forward instructions (colons, durations and bars)\n    unit.groups = []\n    for (let part of unit.lyrics.split(/((?::(?:w|h|q|8|16|32)d?)?:|\\|)/)) { // nb: split with capture groups only works in decent browsers, e.g. IE10+\n      let match = null\n      // move cursor forward by given or default step duration\n      if ((match = part.match(/(:(?:w|h|q|8|16|32)d?)?:/))) offset = this.registerGroup(unit, offset, match[1] ? Utils.duration(match[1]) : defaultCursorStep, barDuration)\n\n      // move cursor to begin of next bar\n      else if (part.match(/\\|/)) offset = this.registerGroup(unit, offset, barDuration - (offset % barDuration), barDuration)\n\n      // (non empty) word group (waiting for its duration)\n      else if (part.length > 0) unit.groups.push({ text: part, offset: offset, duration: 0 })\n    }\n\n    // simulate a final bar if last group still open (no duration), i.e. if lyrics do not end on a : or |\n    if (unit.groups.length && unit.groups[unit.groups.length - 1].duration === 0) offset = this.registerGroup(unit, offset, barDuration - (offset % barDuration), barDuration)\n\n    // get missing duration and complete with empty groups if needed (offset now contains the total duration of all groups)\n    let missingDuration = unit.part.duration - offset\n    this.log('[' + unit.name + '] Missing duration = ' + missingDuration + ' units (' + unit.part.duration + ' - ' + offset + ') = ' + (missingDuration / barDuration) + ' bars missing')\n    if (missingDuration < 0) warnings.push('Lyrics contain ' + Math.floor(-missingDuration / barDuration) + ' bar(s)' + (-missingDuration % barDuration ? ' and ' + Utils.durationcodes(-missingDuration % barDuration) : '') + ' in excess')\n    offset = this.registerGroup(unit, offset, missingDuration, barDuration)\n\n    for (let group of unit.groups) {\n      // compute length of group (in chars), adding 1 so the group having max density is not collated with next group\n      let groupLength = this.getGroupLength(group) + 1\n\n      // ensure the bar will always have the required minimal width\n      group.plen = Math.max(groupLength, Math.ceil(MIN_LYRICS_BARLEN * group.duration / barDuration))\n\n      // compute density of group based on the obtained length\n      group.p = group.plen / group.duration\n\n      // set bar true if group ends on a bar\n      group.bar = (group.offset + group.duration) % barDuration === 0\n\n      // initialize chord changes\n      group.chordChanges = { 'bar': [], 'rhythm': [], 'phrase': [] }\n    }\n\n    // compute maximum density across all groups\n    unit.pmax = 0\n    for (let group of unit.groups) unit.pmax = Math.max(unit.pmax, group.p)\n\n    // iterate on each phrase wise chord change and find the associated group\n    offset = 0\n    for (let phrase of unit.part.phrases) {\n      for (let chordDuration of phrase.chordChanges) {\n        // find closest group starting at or before chord offset\n        let group = null\n        for (let g of unit.groups) { if (g.offset <= offset) group = g }\n        if (!group) throw new Error('No closest group found for chord ' + chordDuration.chord.name + ' with offset ' + offset + ' units')\n\n        // register chord change in group\n        group.chordChanges['phrase'].push({ offset: offset, text: this.getChordDisplay(chordDuration) })\n\n        offset += chordDuration.duration\n      }\n    }\n\n    // iterate on each bar wise chord change and find the associated group\n    offset = { 'rhythm': 0, 'bar': 0 }\n    for (let phrase of unit.part.phrases) {\n      for (let bar of phrase.bars) {\n        for (let chordChangesMode of ['rhythm', 'bar']) {\n          for (let chordDuration of bar.chordChanges[chordChangesMode]) {\n            // find closest group starting at or before chord offset\n            let group = null\n            for (let g of unit.groups) { if (g.offset <= offset[chordChangesMode]) group = g }\n            if (!group) throw new Error('No closest group found for chord ' + chordDuration.chord.name + ' with offset ' + offset[chordChangesMode] + ' units')\n\n            // register chord change in group\n            group.chordChanges[chordChangesMode].push({ offset: offset[chordChangesMode], text: this.getChordDisplay(chordDuration) })\n\n            offset[chordChangesMode] += chordDuration.duration\n          }\n        }\n      }\n    }\n\n    // debug info\n    var debugText = 'Groups of unit [' + unit.name + ']:\\n'\n    var barIndex = 0\n    let zeroDuration = false\n    for (let group of unit.groups) {\n      debugText += '\\tBar ' + (barIndex + 1) + '\\t[' + group.text.replace(/\\n/g, '\\\\N') + ']:' + group.duration + ' (' + group.offset + ' - ' + (group.offset + group.duration) + ') L=' + this.getGroupLength(group) + \" L'=\" + group.plen + ' ρ=' + group.p.toFixed(2) + ' #Chord changes %bar= ' + group.chordChanges['bar'].length + ' %phrase= ' + group.chordChanges['phrase'].length\n      if (group.duration === 0) zeroDuration = true\n      if (group.bar) {\n        barIndex++\n        debugText += ' | '\n      }\n      debugText += '\\n'\n    }\n    debugText += 'ρ max = ' + unit.pmax.toFixed(2)\n    this.log(debugText)\n\n    if (zeroDuration) throw new Error('Detected group with 0 duration')\n\n    return warnings\n  }\n\n  getUnitText (unit, maxConsecutiveSpaces, split, chordChangesMode, showDots) {\n    var unitText = ''\n\n    // concatenate lyrics groups, giving them a number of positions proprtional to their duration\n    var barIndex = 0\n    var groupIndex = 0\n    for (let group of unit.groups) {\n      // where and on how many positions will this group be displayed\n      group.position = [...unitText.replace(/\\n/g, '')].length\n      group.length = Math.ceil(group.duration * unit.pmax)\n\n      // an hyphen means a word has been cut in two, no need for a space before next group\n      // but if the final character should be a bar, then always count this extra character\n      let needFinalSpace = group.bar || !group.text.match(/-$/)\n\n      // if maxConsecutiveSpaces is set, set a maximum for the number of allowed positions if needed\n      let maxLength = null\n      if (maxConsecutiveSpaces > 0) maxLength = this.getGroupLength(group) + maxConsecutiveSpaces - (needFinalSpace ? 0 : 1)\n      if (maxLength) group.length = Math.min(group.length, maxLength)\n\n      // but if group has associated chords, we must have enough space for them (and this has priority over maxConsecutiveSpaces)\n      let minLength = group.bar ? 1 : 0 // 1 for the final bar sign if any\n      if (group.chordChanges[chordChangesMode]) { for (let i = 0; i < group.chordChanges[chordChangesMode].length; i++) minLength += group.chordChanges[chordChangesMode][i].text.length }\n      minLength = Math.max(this.getGroupLength(group) + (needFinalSpace ? 1 : 0), minLength)\n      group.length = Math.max(group.length, minLength)\n\n      // filler string used to reach that length (nb: filler will always have a length of at least 1)\n      let filler = Utils.spaces(group.length - this.getGroupLength(group), showDots || this.DEBUG ? '.' : ' ')\n\n      // replace last character of filler by a | if this is the end of a bar\n      filler = filler.replace(/(.)$/, group.bar ? (split > 0 && ((barIndex + 1) % split === 0) ? '|\\n' : '|') : (this.DEBUG ? '*' : '$1'))\n\n      // append filler to text, remove new lines if splitting at bars\n      var groupText = (split > 0 ? group.text.replace(/\\n/g, '') : group.text) + filler\n\n      this.log('[' + unit.name + '] Display group ' + (groupIndex + 1) + ' \"' + groupText.replace(/\\n/g, '\\\\N') + '\" on ' + group.length + ' chars (CEIL ' + (group.duration * unit.pmax).toFixed(2) + ' MIN ' + minLength + ' MAX ' + (maxLength || 'n/a') + ')')\n      unitText += groupText\n\n      groupIndex++\n      if (group.bar) barIndex++\n    }\n\n    // we weren't asked to add chords\n    if (!chordChangesMode) return unitText\n\n    // build chord inserts, based on bar or phrase wise changes, each with the text and position where to insert\n    let chordInserts = []\n    for (let group of unit.groups) {\n      let lengthStillToPlaceOnThisGroup = 0\n      let lengthYetPlacedOnThisGroup = 0\n\n      // compute length of all chord inserts\n      for (let chordChange of group.chordChanges[chordChangesMode]) lengthStillToPlaceOnThisGroup += chordChange.text.length\n\n      for (let chordChange of group.chordChanges[chordChangesMode]) {\n        // position of the chord will be the position of the group + length corresponding to offset delta\n        let positionDelta = Math.ceil(((chordChange.offset - group.offset) / group.duration) * group.length)\n        let positionDelta_ = positionDelta\n\n        // ensure that chord name will not cross end of group it belongs to (last char of group must not be overwritten either if it is a bar)\n        while (positionDelta + lengthStillToPlaceOnThisGroup > group.length - (group.bar ? 1 : 0)) { positionDelta-- }\n\n        // ensure that chords already there still have enough room\n        while (positionDelta - lengthYetPlacedOnThisGroup < 0) { positionDelta++ }\n\n        this.log('Closest group \"' + group.text.replace(/\\n/g, '\\\\n') + '\" with offset ' + group.offset + ' and position ' + group.position + ' found for ' + chordChange.text.trim() + ' with offset ' + chordChange.offset + ' units\\n\\tposition delta from group start = ' + positionDelta + ' chars (initially ' + positionDelta_ + ' chars)')\n        chordInserts.push({ text: chordChange.text, offset: chordChange.offset, position: group.position + positionDelta })\n\n        lengthYetPlacedOnThisGroup = positionDelta + chordChange.text.length\n        lengthStillToPlaceOnThisGroup -= chordChange.text.length\n      }\n    }\n\n    for (let chordInsert of chordInserts) this.log('[' + unit.name + '] Should insert ' + chordInsert.text + ' @ ' + chordInsert.offset + ' units / ' + chordInsert.position + ' chars')\n\n    // insert these chord inserts\n    let position = 0\n    let skip = 0\n    let unitText_ = unitText\n    let chordText = ''\n    unitText = ''\n    for (let char of unitText_) {\n      if (char === '\\n') {\n        unitText += '\\n'\n        chordText += '\\n'\n        skip = 0\n      } else {\n        for (let chordInsert of chordInserts) {\n          if (!chordInsert.inserted) {\n            if (chordInsert.position <= position) {\n              this.log('[' + unit.name + '] Inserting ' + chordInsert.text + ' @ ' + position + ' chars')\n              chordText += chordInsert.text\n              chordInsert.inserted = true\n              skip = chordInsert.text.length\n            }\n          }\n        }\n\n        position++\n\n        // add char to unit text, and corresponding space to chord text\n        // only bar symbols are added in chord text instead of unit text (if showing dots, then bars are displayed in both texts)\n        if (skip === 0) { chordText += char === '|' ? char : ' ' } else { skip-- }\n        unitText += char === '|' && !(showDots || this.DEBUG) ? ' ' : char\n      }\n    }\n\n    // and interlace the two strings\n    return Utils.interlace(chordText, unitText, null, KEEP_EMPTY_LINES)\n  }\n\n  registerGroup (unit, offset, step, barDuration) {\n    if (!barDuration) throw new Error('Invalid bar duration passed to registerGroup')\n\n    while (step > 0) {\n      // duration added to preceding group may never be more than what's left until end of bar\n      let addDuration = Math.min(step, barDuration - (offset % barDuration))\n\n      // create a new group if none or if preceding already got its duration\n      if (!unit.groups.length || (!LYRICS_SUM_DURATIONS && unit.groups[unit.groups.length - 1].duration > 0)) unit.groups.push({ text: '', offset: offset, duration: 0 })\n\n      // add this duration to preceding group (create it if needed)\n      unit.groups[unit.groups.length - 1].duration += addDuration\n      offset += addDuration\n      step -= addDuration\n\n      // step is going to cross end of bar: directly create a first empty group\n      if (step > 0) unit.groups.push({ text: this.DEBUG > 1 ? '_' : '', offset: offset, duration: 0 })\n    }\n\n    return offset\n  }\n\n  getGroupLength (group) {\n    // return the number of visible graphemes in group text\n    // - newlines are not counted\n    // - tabs will be converted to spaces and may thus count as 1\n    // - use spread operator to correctly count astral unicode symbols\n    return [...group.text.replace(/\\n/g, '')].length\n  }\n\n  getChordDisplay (chordDuration) {\n    // space and not empty if hidden, to ensure that a white space will show that this change does not happen at the begin of the bar\n    if (chordDuration.hidden) return ' '\n\n    // a space prevents chord names to be glued together on group and prevents a next group from starting directly after last chord of previous group\n    return chordDuration.chord.name + ' '\n  }\n}\n\n/**\n * Public API\n */\n\nexport class Compiler {\n  constructor (songcheat, DEBUG) {\n    this.compiler_ = new Compiler_(DEBUG)\n    if (songcheat) this.set(songcheat)\n  }\n\n  set (songcheat) {\n    this.compiler_.log(Utils.title('COMPILE SONGCHEAT'))\n    this.scc = this.compiler_.compile(JSON.parse(JSON.stringify(songcheat)))\n  }\n\n  parseLyrics (unit) {\n    this.compiler_.log(Utils.title('PARSE LYRICS ' + unit.name))\n    return this.compiler_.parseLyrics(unit, Utils.duration(this.scc.lyricsUnit), this.scc.barDuration)\n  }\n\n  getUnitText (unit, maxConsecutiveSpaces, split, chordChangesMode, showDots) {\n    this.compiler_.log(Utils.title(`GET LYRICS TEXT ${unit.name} (maxConsecutiveSpaces = ${maxConsecutiveSpaces}, split = ${split}, chordChangesMode = ${chordChangesMode}, showDots = ${showDots})`))\n    return this.compiler_.getUnitText(unit, maxConsecutiveSpaces, split, chordChangesMode, showDots)\n  }\n\n  getPartText (part, maxConsecutiveSpaces, split, chordChangesMode, showDots) {\n    // dummy unit with no lyrics\n    let unit = { name: part.name, part: part }\n\n    this.compiler_.log(Utils.title('PARSE PART LYRICS ' + unit.name))\n    this.compiler_.parseLyrics(unit, Utils.duration(this.scc.lyricsUnit), this.scc.barDuration)\n\n    this.compiler_.log(Utils.title(`GET PART LYRICS TEXT ${unit.name} (maxConsecutiveSpaces = ${maxConsecutiveSpaces}, split = ${split}, chordChangesMode = ${chordChangesMode}, showDots = ${showDots})`))\n    return this.compiler_.getUnitText(unit, maxConsecutiveSpaces, split, chordChangesMode, showDots)\n  }\n}\n","module.exports = {\n  \"Bass\": require(\"./Bass.json\"),\n  \"BassAmp360\": require(\"./BassAmp360.json\"),\n  \"BassFuzz\": require(\"./BassFuzz.json\"),\n  \"BassFuzz2\": require(\"./BassFuzz2.json\"),\n  \"BassSubDub\": require(\"./BassSubDub.json\"),\n  \"BassSubDub2\": require(\"./BassSubDub2.json\"),\n  \"Brass\": require(\"./Brass.json\"),\n  \"BritBlues\": require(\"./BritBlues.json\"),\n  \"BritBluesDriven\": require(\"./BritBluesDriven.json\"),\n  \"Buzzy1\": require(\"./Buzzy1.json\"),\n  \"Buzzy2\": require(\"./Buzzy2.json\"),\n  \"Celeste\": require(\"./Celeste.json\"),\n  \"ChorusStrings\": require(\"./ChorusStrings.json\"),\n  \"Dissonant1\": require(\"./Dissonant1.json\"),\n  \"Dissonant2\": require(\"./Dissonant2.json\"),\n  \"DissonantPiano\": require(\"./DissonantPiano.json\"),\n  \"DroppedSaw\": require(\"./DroppedSaw.json\"),\n  \"DroppedSquare\": require(\"./DroppedSquare.json\"),\n  \"DynaEPBright\": require(\"./DynaEPBright.json\"),\n  \"DynaEPMed\": require(\"./DynaEPMed.json\"),\n  \"Ethnic33\": require(\"./Ethnic33.json\"),\n  \"Full1\": require(\"./Full1.json\"),\n  \"Full2\": require(\"./Full2.json\"),\n  \"GuitarFuzz\": require(\"./GuitarFuzz.json\"),\n  \"Harsh\": require(\"./Harsh.json\"),\n  \"MklHard\": require(\"./MklHard.json\"),\n  \"Noise\": require(\"./Noise.json\"),\n  \"Organ2\": require(\"./Organ2.json\"),\n  \"Organ3\": require(\"./Organ3.json\"),\n  \"PhonemeAh\": require(\"./PhonemeAh.json\"),\n  \"PhonemeBah\": require(\"./PhonemeBah.json\"),\n  \"PhonemeEe\": require(\"./PhonemeEe.json\"),\n  \"PhonemeO\": require(\"./PhonemeO.json\"),\n  \"PhonemeOoh\": require(\"./PhonemeOoh.json\"),\n  \"PhonemePopAhhhs\": require(\"./PhonemePopAhhhs.json\"),\n  \"Piano\": require(\"./Piano.json\"),\n  \"Pulse\": require(\"./Pulse.json\"),\n  \"PutneyWavering\": require(\"./PutneyWavering.json\"),\n  \"Saw\": require(\"./Saw.json\"),\n  \"Square\": require(\"./Square.json\"),\n  \"TB303Square\": require(\"./TB303Square.json\"),\n  \"Throaty\": require(\"./Throaty.json\"),\n  \"Triangle\": require(\"./Triangle.json\"),\n  \"Trombone\": require(\"./Trombone.json\"),\n  \"TwelveOpTines\": require(\"./TwelveOpTines.json\"),\n  \"TwelveStringGuitar1\": require(\"./TwelveStringGuitar1.json\"),\n  \"WarmSaw\": require(\"./WarmSaw.json\"),\n  \"WarmSquare\": require(\"./WarmSquare.json\"),\n  \"WarmTriangle\": require(\"./WarmTriangle.json\"),\n  \"Wurlitzer\": require(\"./Wurlitzer.json\"),\n  \"Wurlitzer2\": require(\"./Wurlitzer2.json\")\n}\n","import { Utils } from './utils'\nimport waveTables from '@mohayonao/wave-tables'\n\nexport class Player {\n  constructor (audioCtx, notes, config) {\n    this.MODE_RHYTHM = 1 // play beeps only\n    this.MODE_BASS = 2 // when there is a strummed chord, play only bass (no effect onindividual strings)\n    this.MODE_CHORDS = 3 // play actual strummed chords\n\n    config = config || {}\n    config.signature = config.signature || {}\n    config.signature.time = config.signature.time || {}\n\n    // audio context\n    this.audioCtx = audioCtx\n\n    // notes to beep\n    this.notes = notes\n\n    // config: loop or not and callback at end if no loop\n    this.loop = config.loop || false\n    this.onDone = config.onDone || null\n    this.onCountdown = config.onCountdown || function () {}\n\n    // config: capo and signature (tempo, time, shuffle)\n    this.capo = config.capo || 0\n    this.tempo = config.signature.tempo || 100\n    this.beatsPerBar = config.signature.time.beatsPerBar || 4\n    this.beatDuration = config.signature.time.beatDuration || ':q'\n    this.shuffle = config.signature.shuffle ? Utils.duration(config.signature.shuffle) : false\n\n    // tuning, defaults to standard tuning\n    this.tuning = config.tuning || [329.63, // E4\n      246.94, // B3\n      196.00, // G3\n      146.83, // D3\n      110.00, // A2\n      82.41\n    ] // E2\n\n    // play control\n    this.stopped = true\n    this.paused = false\n\n    // initialize to defaults\n    this.speed(100)\n    this.setDisto(0)\n    this.setVolume(50)\n    this.setMode(this.MODE_CHORDS)\n    this.setType(config.type || 'Piano')\n  }\n\n  makeDistortionCurve (amount) {\n    let k = typeof amount === 'number' ? amount : 50\n    let nSamples = 44100\n    let curve = new Float32Array(nSamples)\n    let deg = Math.PI / 180\n    for (let i = 0; i < nSamples; ++i) {\n      let x = i * 2 / nSamples - 1\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x))\n    }\n    return curve\n  }\n\n  /**\n   * duration of the tone in milliseconds\n   * frequency of the tone in hertz\n   * volume of the tone between 0 and 1\n   * type of tone. Possible values are sine, square, sawtooth, triangle, and custom.\n   * callback to use on end of tone\n   */\n  sound (time, duration, frequency, volume, distortion, type, onended) {\n    let audioCtx = this.audioCtx\n    let gainNode = audioCtx.createGain()\n    gainNode.gain.value = volume\n\n    if (distortion) {\n      let distoNode = audioCtx.createWaveShaper()\n      distoNode.curve = this.makeDistortionCurve(parseInt(distortion, 10))\n      distoNode.oversample = '4x'\n      distoNode.connect(audioCtx.destination)\n      gainNode.connect(distoNode)\n    } else gainNode.connect(audioCtx.destination)\n\n    let oscillator = audioCtx.createOscillator()\n    oscillator.connect(gainNode)\n\n    oscillator.frequency.value = frequency\n    oscillator.onended = onended\n\n    // type can be a periodic wave or a standard oscillator type\n    if (waveTables[type]) oscillator.setPeriodicWave(audioCtx.createPeriodicWave(waveTables[type].real, waveTables[type].imag))\n    else oscillator.type = type\n\n    oscillator.start(time)\n    oscillator.stop(time + duration)\n  }\n\n  chord2frequencies (chord, strings, transpose) {\n    let freqs = []\n    for (let o of Utils.chordStrings(chord, strings)) {\n      if (!o.mute) freqs.push(this.tuning[o.string - 1] * Math.pow(Math.pow(2, 1 / 12), transpose + o.fret))\n    }\n    return freqs\n  }\n\n  ms_ (note) {\n    // base duration of note\n    let ms_ = note.duration * this.msPerUnit\n\n    // change duration proportions for shuffled notes\n    if (this.shuffle && note.duration === this.shuffle) {\n      if (note.offset % (2 * this.shuffle) === 0) ms_ *= 1.3333\n      else ms_ *= 0.6667\n    }\n\n    return ms_\n  }\n\n  note_ (time) {\n    let audioCtx = this.audioCtx\n    var self = this\n\n    // stop or pause requested\n    if (this.stopped || this.paused) {\n      this.donePlaying = true\n      return true\n    }\n\n    // get note to play\n    if (!this.notes) return false\n    let note = this.notes[this.noteIndex]\n    if (!note) return false\n\n    let isBar = note.offset === 0\n    let isBeat = note.offset % Utils.duration(this.beatDuration) === 0\n    let isUp = note.flags.stroke === 'u' || note.flags.stroke === 'uu'\n    let isDown = note.flags.stroke === 'd' || note.flags.stroke === 'dd'\n    let isArpeggiated = note.flags.stroke && note.flags.stroke.length === 2\n\n    // get number of ms that this note should last\n    let ms = note.tied ? 0 : this.ms_(note)\n\n    // consume next ties note(s) if any\n    for (let nextNoteIndex = this.noteIndex + 1; nextNoteIndex < this.notes.length && this.notes[nextNoteIndex].tied; nextNoteIndex++) ms += this.ms_(this.notes[nextNoteIndex])\n\n    // beep or chord volume\n    let volume = 0.25 * (this.volume / 100.0) // base gain from 0 to 1.5 according to user volume slider\n    if (note.flags.accent) volume *= 1.5 // increase gain by 50% if accent\n    if (note.rest) volume = 0 // silence if rest\n\n    // beep frequency\n    let freqs = [440 * 1.5]\n    if (isBar) freqs[0] *= 2 // octave\n    else if (isBeat) freqs[0] *= 1.5 // quinte\n\n    // get note chord, ignored in rhythm mode\n    let chord = this.mode === this.MODE_RHYTHM ? null : note.chord\n\n    // beep duration is 5 ms\n    // actual notes are played for the whole duration if tied otherwise for 90%\n    let beepduration = chord ? (note.tied ? ms : ms * 0.90) : Math.min(ms, 5)\n\n    // for rhythm type is always square and no distortion, for actual notes use the user-defined settings\n    let type = chord ? this.type : 'square'\n    let distortion = chord ? this.distortion : null\n\n    // played chord (for a rest, chord is set but strings is not)\n    if (chord && note.strings) {\n      // get frequencies for chord notes\n      freqs = this.chord2frequencies(chord, this.mode === this.MODE_BASS ? note.strings.replace(/\\*/g, 'B') : note.strings, this.capo)\n\n      // reverse string order if up stroke\n      if (isUp) freqs = freqs.reverse()\n\n      // adjust volume according to number of simultaneous notes\n      // volume = volume / (2.0 * Math.sqrt(freqs.length));\n      // UPDATE: no, bass among chords is otherwise louder than it should\n      // UPDATE: instead increase volume only if BASS ONLY mode\n      if (this.mode === this.MODE_BASS) volume *= 3\n    }\n\n    // set next note to play\n    this.noteIndex = (this.noteIndex + 1) % this.notes.length\n\n    // info message, scheduled to display at the same time as oscillator will play our sound\n    let what = note.rest ? 'REST' : (note.tied ? 'TIED' : (chord ? chord.name + '/' + freqs.length + ' ' + (isDown ? 'B' : '') + (isUp ? 'H' : '') : 'BEEP'))\n    let message = (isBar ? '\\n|\\t' : '\\t') + ('[' + what + ']').padEnd(10, ' ') + (note.offset + Utils.durationcode(note.duration)).padEnd(5, ' ') + ' ' + ms.toFixed(0) + ' ms [VOL ' + (volume * 100) + '] ' + (isBar ? ' [BAR]' : (isBeat ? ' [BEAT]' : '')) + (note.flags.accent ? ' [ACCENT]' : '')\n    setTimeout(function () { console.info(message) }, Math.max(0, time - audioCtx.currentTime) * 1000)\n\n    // jump to next note if tied\n    if (note.tied) {\n      self.note_(time)\n      return\n    }\n\n    // play beep (1 note) or chord (N notes)\n    let fIndex = 0\n    let delay = 0\n    for (let frequency of freqs) {\n      // handle next node when last note has done playing\n      this.sound(time + delay / 1000.0, (beepduration - delay) / 1000.0, frequency, volume, distortion, type, fIndex < freqs.length - 1 ? null : function () {\n        // back on first note: stop and callback if not loop\n        if (self.noteIndex === 0 && !self.loop) {\n          self.stop()\n          if (self.onDone) self.onDone()\n        } else self.note_(time + ms / 1000.0)\n      })\n\n      // simulate the fact that strings hit first will sound first (but they'll all stop at the same time, hence substrating delay from beepduration above)\n      // when a chord is arpeggiated, take 3/4 of available duration to hit strings the one after the other\n      delay += (isArpeggiated ? (beepduration * 0.75) / freqs.length : (note.tied ? 0 : 10))\n\n      // simulate the fact that first hit strings will sound louder\n      volume *= 0.95\n\n      fIndex++\n    }\n  }\n\n  stop () {\n    this.stopped = true\n    this.paused = false\n    if (this.cd) {\n      clearTimeout(this.cd)\n      this.onCountdown()\n    }\n  }\n\n  pause () {\n    this.stopped = false\n    this.paused = true\n    if (this.cd) {\n      clearTimeout(this.cd)\n      this.onCountdown()\n    }\n  }\n\n  play (countdown) {\n    let audioCtx = this.audioCtx\n    let self = this\n\n    if (!this.paused) this.noteIndex = 0\n    this.stopped = false\n    this.paused = false\n\n    this.onCountdown(countdown)\n    if (countdown) this.cd = setTimeout(function () { self.play(countdown - 1) }, 1000)\n    else {\n      // compute for each note the offset wrt the bar it's contained in\n      let offset = 0\n      for (let note of this.notes) {\n        note.offset = offset\n        offset = (offset + note.duration) % (this.beatsPerBar * Utils.duration(this.beatDuration))\n      }\n\n      this.note_(audioCtx.currentTime)\n    }\n  }\n\n  rewind () {\n    if (this.stopped) return\n\n    if (this.paused) {\n      this.noteIndex = 0\n      return\n    }\n\n    let self = this\n    this.donePlaying = false\n    this.stop()\n    let recfun = function () {\n      if (self.donePlaying) self.play()\n      else setTimeout(recfun, 100)\n    }\n    recfun()\n  }\n\n  getTempo () {\n    return (this.tempo * this.speedpct / 100.0).toFixed(0)\n  }\n\n  speed (pct) {\n    if (pct < 0) throw new Error('Invalid tempo percentage: ' + pct)\n\n    this.speedpct = pct\n\n    // compute ms per duration unit based on given tempo and beat duration\n    let msPerBeat = 60000 / (this.tempo * this.speedpct / 100.0) // ms/beat = ms/minute : beats/minute\n    this.msPerUnit = msPerBeat / Utils.duration(this.beatDuration) // ms/unit = ms/beat : units/beat\n    console.info('Player gone to ' + msPerBeat + ' ms / beat')\n  }\n\n  speedup (step) {\n    this.speed(Math.min(500, this.speedpct + step))\n  }\n\n  slowdown (step) {\n    this.speed(Math.max(20, this.speedpct - step))\n  }\n\n  setMode (mode) {\n    this.mode = parseInt(mode, 10)\n    console.info('Player gone to mode ' + mode)\n  }\n\n  setType (type) {\n    this.type = type\n    console.info('Player gone to type ' + type)\n  }\n\n  setDisto (d) {\n    this.distortion = parseInt(d, 10)\n    console.info('Player gone to disto ' + d)\n  }\n\n  setVolume (v) {\n    this.volume = parseInt(v, 10)\n    console.info('Player gone to volume ' + v)\n  }\n}\n","import { Compiler, Player } from 'songcheat-core'\nimport samples from '../dist/samples.json'\n\n// https://github.com/rollup/rollup/issues/1803/\n// import $ from 'jQuery'\nlet $ = window.jQuery\n\n// create audio context\nlet audioCtx = new (window.AudioContext || window.webkitAudioContext || window.audioContext)()\n\n// get a random sample songcheat and compile it\nlet sample = samples[Math.floor(Math.random() * samples.length)]\nlet compiler = new Compiler(sample, 0)\nlet songcheat = compiler.scc\n$('body>h1').html(`${songcheat.title} (${songcheat.artist}, ${songcheat.year})`)\n\n// get notes for whole song\nlet notes = []\nfor (let unit of songcheat.structure) {\n  for (let phrase of unit.part.phrases) {\n    for (let bar of phrase.bars) {\n      for (let note of bar.rhythm.compiledScore) {\n        let chordedNote = JSON.parse(JSON.stringify(note))\n        chordedNote.chord = bar.chords[note.placeholderIndex % bar.chords.length]\n        if (!chordedNote.chord) throw new Error('No chord found for placeholder ' + (note.placeholderIndex + 1))\n        notes.push(chordedNote)\n      }\n    }\n  }\n}\n\n// play\nlet player = new Player(audioCtx, notes, {\n  loop: false,\n  capo: parseInt(songcheat.capo, 10),\n  signature: songcheat.signature,\n  type: songcheat.wave\n})\n\n// control player\n$('#pause').on('click', function () {\n  player.pause()\n  $('#pause').hide()\n  $('#play').show()\n})\n\n$('#play').show().on('click', function () {\n  player.play()\n  $('#pause').show()\n  $('#play').hide()\n})\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAO,MAAM,KAAK,CAAC;;;;;EAKjB,OAAO,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;IACxB,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,IAAI;IACxB,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,IAAI,EAAE,OAAO,KAAK;IAC1C,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,OAAO,KAAK;IACvC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;MACjC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,KAAK;KAChC;IACD,OAAO,IAAI;GACZ;;;;;;EAMD,OAAO,KAAK,CAAC,CAAC,GAAG,EAAE;IACjB,OAAO,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,QAAQ,GAAG,GAAG,GAAG,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI;GACrH;;EAED,OAAO,UAAU,CAAC,CAAC,CAAC,EAAE;IACpB,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;GAC9C;;EAED,OAAO,SAAS,CAAC,CAAC,CAAC,EAAE,UAAU,EAAE;IAC/B,IAAI,KAAK,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,cAAc,EAAE,UAAU,KAAK,EAAE,MAAM,EAAE,EAAE,OAAO,MAAM,CAAC,WAAW,EAAE,EAAE,EAAC;IAC7G,OAAO,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK;GAC3E;;EAED,OAAO,MAAM,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE;IAC3B,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC;IAC7G,IAAI,CAAC,GAAG,GAAE;IACV,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,IAAI,IAAI,IAAG;IACjD,OAAO,CAAC;GACT;;EAED,OAAO,oBAAoB,CAAC,CAAC,CAAC,EAAE;;;;;IAK9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;IAC9B,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,EAAC;;IAE9B,OAAO,CAAC;GACT;;;;;;;EAOD,OAAO,SAAS,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,cAAc,EAAE;IACvD,IAAI,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,EAAC;IAC7B,IAAI,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,EAAC;IAC7B,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;MAC7B,IAAI,KAAK,GAAG,cAAc,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAC;MACxE,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC;MACpD,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;KACxB,EAAC;IACF,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;GACpB;;;;;;EAMD,OAAO,eAAe,CAAC,CAAC,IAAI,EAAE;IAC5B,IAAI,GAAG,GAAG,GAAE;IACZ,KAAK,IAAI,CAAC,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAC,EAAE;IAC3F,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;GACrB;;;;;;EAMD,OAAO,QAAQ,CAAC,CAAC,IAAI,EAAE;IACrB,IAAI,IAAI,KAAK,KAAK,EAAE,OAAO,CAAC;IAC5B,IAAI,IAAI,KAAK,KAAK,EAAE,OAAO,CAAC;IAC5B,IAAI,IAAI,KAAK,IAAI,EAAE,OAAO,CAAC;IAC3B,IAAI,IAAI,KAAK,IAAI,EAAE,OAAO,EAAE;IAC5B,IAAI,IAAI,KAAK,IAAI,EAAE,OAAO,EAAE;IAC5B,IAAI,IAAI,KAAK,IAAI,EAAE,OAAO,EAAE;;IAE5B,IAAI,IAAI,KAAK,MAAM,EAAE,OAAO,CAAC;IAC7B,IAAI,IAAI,KAAK,MAAM,EAAE,OAAO,CAAC;IAC7B,IAAI,IAAI,KAAK,KAAK,EAAE,OAAO,EAAE;IAC7B,IAAI,IAAI,KAAK,KAAK,EAAE,OAAO,EAAE;IAC7B,IAAI,IAAI,KAAK,KAAK,EAAE,OAAO,EAAE;IAC7B,IAAI,IAAI,KAAK,KAAK,EAAE,OAAO,EAAE;;IAE7B,MAAM,IAAI,KAAK,CAAC,yBAAyB,GAAG,IAAI,GAAG,GAAG,CAAC;GACxD;;;;;;EAMD,OAAO,YAAY,CAAC,CAAC,KAAK,EAAE;IAC1B,KAAK,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE;MACjD,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,KAAK,EAAE,OAAO,GAAG,GAAG,IAAI;MAC1D,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,GAAG,GAAG,CAAC,KAAK,KAAK,EAAE,OAAO,GAAG,GAAG,IAAI,GAAG,GAAG;KACvE;;IAED,MAAM,IAAI,KAAK,CAAC,wCAAwC,GAAG,KAAK,GAAG,QAAQ,CAAC;GAC7E;;;;;;EAMD,OAAO,aAAa,CAAC,CAAC,KAAK,EAAE;IAC3B,IAAI,KAAK,GAAG,GAAE;;IAEd,IAAI,OAAO,GAAG,MAAK;IACnB,IAAI,IAAI,GAAG,EAAC;;IAEZ,OAAO,OAAO,GAAG,CAAC,EAAE;MAClB,IAAI;QACF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAC;QACtC,OAAO,GAAG,KAAI;QACd,IAAI,GAAG,EAAC;OACT,CAAC,OAAO,CAAC,EAAE;QACV,OAAO,GAAE;QACT,IAAI,GAAE;OACP;KACF;;IAED,IAAI,IAAI,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,4CAA4C,GAAG,KAAK,GAAG,QAAQ,CAAC;;IAE9F,OAAO,KAAK;GACb;;;;;;;EAOD,OAAO,SAAS,CAAC,CAAC,IAAI,EAAE;IACtB,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,EAAE,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,GAAG,IAAI,GAAG,uDAAuD,CAAC;IACzJ,OAAO,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;GAClF;;;;;;;EAOD,OAAO,SAAS,CAAC,CAAC,IAAI,EAAE;IACtB,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,MAAM,IAAI,KAAK,CAAC,oBAAoB,GAAG,IAAI,GAAG,oBAAoB,CAAC;IACjG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,oBAAoB,GAAG,IAAI,GAAG,4CAA4C,CAAC;IAC1H,OAAO,IAAI,IAAI,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC;GACtF;;;;;;EAMD,OAAO,OAAO,CAAC,CAAC,IAAI,EAAE,YAAY,EAAE;IAClC,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAC;IAC/B,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,GAAG,IAAI,GAAG,2CAA2C,CAAC;IACzH,IAAI,IAAI,KAAK,CAAC,EAAE,OAAO,CAAC;IACxB,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,YAAY,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,+BAA+B,GAAG,YAAY,GAAG,2CAA2C,CAAC;IAC1J,IAAI,YAAY,GAAG,CAAC,GAAG,IAAI,IAAI,YAAY,GAAG,IAAI,EAAE,MAAM,IAAI,KAAK,CAAC,OAAO,GAAG,IAAI,GAAG,4CAA4C,GAAG,YAAY,GAAG,qCAAqC,CAAC;IACzL,OAAO,IAAI,GAAG,CAAC,GAAG,YAAY;GAC/B;;;;;;EAMD,OAAO,OAAO,CAAC,CAAC,OAAO,EAAE,YAAY,EAAE;IACrC,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,OAAO,GAAG,YAAY,GAAG,CAAC,GAAG,OAAO,CAAC;GACtE;;;;;;;EAOD,OAAO,YAAY,CAAC,CAAC,KAAK,EAAE,OAAO,EAAE;IACnC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,IAAI,KAAK,CAAC,kCAAkC,GAAG,KAAK,CAAC,IAAI,CAAC;IACtF,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,IAAI,KAAK,CAAC,kCAAkC,GAAG,KAAK,CAAC,IAAI,CAAC;;IAEtF,IAAI,MAAM,GAAG,GAAE;IACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;MAE/C,IAAI,MAAM,GAAG,CAAC,GAAG,EAAC;;;MAGlB,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,QAAQ;;;MAGxC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,MAAM,GAAE;MACrE,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,EAAC;;;;;MAKvC,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;QAC1D,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,EAAC;QAC7C,IAAI,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAC;QACnE,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,IAAG;QAClC,MAAM,CAAC,IAAI,CAAC;UACV,MAAM,EAAE,MAAM;UACd,IAAI,EAAE,IAAI;UACV,IAAI,EAAE,IAAI;SACX,EAAC;OACH;KACF;;IAED,OAAO,MAAM;GACd;CACF;;ACiFD;;GAEG;;AClTH,IAAI,iBAAiB,GAAG,GAAE;AAC1B,IAAI,oBAAoB,GAAG,MAAK;AAChC,IAAI,gBAAgB,GAAG,MAAK;;AAE5B,AAAO,MAAM,iBAAiB,CAAC;EAC7B,WAAW,CAAC,CAAC,OAAO,EAAE;IACpB,IAAI,CAAC,OAAO,GAAG,QAAO;GACvB;;EAED,QAAQ,CAAC,GAAG;IACV,OAAO,kBAAkB,GAAG,IAAI,CAAC,OAAO;GACzC;CACF;;AAED,MAAM,SAAS,CAAC;EACd,WAAW,CAAC,CAAC,KAAK,EAAE;;IAElB,IAAI,CAAC,KAAK,GAAG,MAAK;GACnB;;EAED,GAAG,CAAC,GAAG;IACL,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,SAAS,EAAC;GAC1D;;EAED,OAAO,CAAC,CAAC,SAAS,EAAE;;IAElB,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,IAAI,KAAI;IACvC,SAAS,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU,IAAI,IAAG;IAClD,SAAS,CAAC,WAAW,GAAG,SAAS,CAAC,WAAW,IAAI,EAAC;IAClD,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,IAAI,GAAE;IAC/C,SAAS,CAAC,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,SAAS,CAAC,GAAG,IAAI,IAAG;IACxD,SAAS,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,SAAS,CAAC,IAAI,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,EAAE,MAAM,EAAE,KAAK,GAAE;IAC5G,SAAS,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU,IAAI,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,aAAY;IACpF,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,IAAI,GAAE;IACzC,SAAS,CAAC,OAAO,GAAG,SAAS,CAAC,OAAO,IAAI,GAAE;IAC3C,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,IAAI,GAAE;;;IAGvC,SAAS,CAAC,WAAW,GAAG,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAC;;;IAGpH,IAAI,CAAC,UAAU,CAAC,SAAS,EAAC;;;IAG1B,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;MACxB,SAAS,CAAC,SAAS,GAAG,GAAE;MACxB,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAC;KAC7E;;;IAGD,IAAI,WAAW,GAAG,GAAE;IACpB,IAAI,YAAY,GAAG,GAAE;IACrB,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,SAAS,EAAE,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,OAAO,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,WAAW,GAAG,CAAC,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAC;IACtJ,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,SAAS,EAAE;MACpC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,OAAO,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,WAAW,GAAG,CAAC,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAC;MACnH,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,EAAC;KACrH;;;IAGD,IAAI,MAAM,GAAG,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAC;IACtE,IAAI,SAAS,GAAG,EAAC;IACjB,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,SAAS,EAAE,GAAG,MAAM,CAAC,MAAM,EAAC,EAAE;;;IAGvG,KAAK,IAAI,MAAM,IAAI,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAC;;IAEvG,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,KAAK,EAAE;;MAEhC,IAAI,WAAW,GAAG,EAAC;MACnB,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;QAC/B,MAAM,CAAC,YAAY,GAAG,GAAE;QACxB,IAAI,SAAS,GAAG,KAAI;QACpB,KAAK,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,WAAW,EAAE,KAAK,EAAE,SAAS,EAAC;;QAEhI,IAAI,CAAC,GAAG,CAAC,yCAAyC,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,IAAI,WAAW,GAAG,CAAC,CAAC,EAAC;QACzF,KAAK,IAAI,CAAC,IAAI,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,QAAQ,GAAG,QAAQ,EAAC;;;QAGlG,IAAI,QAAQ,GAAG,EAAC;QAChB,KAAK,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE;UAC3B,GAAG,CAAC,YAAY,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,GAAE;UAC9C,KAAK,IAAI,gBAAgB,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,YAAY,CAAC,gBAAgB,CAAC,EAAE,SAAS,CAAC,WAAW,EAAE,gBAAgB,KAAK,KAAK,EAAC;;UAEhK,IAAI,CAAC,GAAG,CAAC,uCAAuC,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,IAAI,WAAW,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAC;UAC9G,KAAK,IAAI,CAAC,IAAI,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,QAAQ,GAAG,QAAQ,EAAC;UAC3G,IAAI,CAAC,GAAG,CAAC,qCAAqC,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,IAAI,WAAW,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAC;UAC5G,KAAK,IAAI,CAAC,IAAI,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,QAAQ,GAAG,QAAQ,EAAC;;UAExG,QAAQ,GAAE;SACX;;QAED,WAAW,GAAE;OACd;;;MAGD,IAAI,CAAC,QAAQ,GAAG,EAAC;MACjB,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,KAAK,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,IAAI,GAAG,CAAC,MAAM,CAAC,SAAQ,EAAE;KACvG;;;IAGD,OAAO,SAAS;GACjB;;EAED,UAAU,CAAC,CAAC,SAAS,EAAE;IACrB,IAAI,SAAS,GAAG,EAAC;IACjB,IAAI,SAAS,CAAC,SAAS,EAAE;MACvB,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,SAAS,EAAE;QACpC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,IAAI,iBAAiB,CAAC,4BAA4B,IAAI,SAAS,GAAG,CAAC,CAAC,CAAC;;;QAG3F,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,EAAC;QACrD,IAAI,CAAC,IAAI,EAAE,MAAM,IAAI,iBAAiB,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC;QAC1E,IAAI,CAAC,IAAI,GAAG,KAAI;;QAEhB,SAAS,GAAE;OACZ;KACF;;IAED,IAAI,SAAS,CAAC,KAAK,EAAE;MACnB,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,KAAK,EAAE;QAChC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,iBAAiB,CAAC,gCAAgC,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAClG,IAAI,EAAE,IAAI,CAAC,OAAO,YAAY,KAAK,CAAC,EAAE,MAAM,IAAI,iBAAiB,CAAC,4BAA4B,GAAG,IAAI,CAAC,IAAI,GAAG,6BAA6B,IAAI,OAAO,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;;QAE9K,IAAI,WAAW,GAAG,EAAC;QACnB,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;UAC/B,IAAI,QAAQ,GAAG,EAAC;UAChB,KAAK,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE;YAC3B,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,6BAA6B,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,aAAa,IAAI,WAAW,GAAG,CAAC,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;YACrJ,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,6BAA6B,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,aAAa,IAAI,WAAW,GAAG,CAAC,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;YACrJ,IAAI,EAAE,GAAG,CAAC,MAAM,YAAY,KAAK,CAAC,EAAE,MAAM,IAAI,iBAAiB,CAAC,yBAAyB,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,aAAa,IAAI,WAAW,GAAG,CAAC,CAAC,GAAG,4BAA4B,IAAI,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC;;;YAGpM,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,CAAC,MAAM,EAAC;YAC1D,IAAI,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM,GAAG,qBAAqB,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,aAAa,IAAI,WAAW,GAAG,CAAC,CAAC,CAAC;YAC7I,GAAG,CAAC,MAAM,GAAG,OAAM;;;YAGnB,IAAI,MAAM,GAAG,GAAE;YACf,KAAK,IAAI,OAAO,IAAI,GAAG,CAAC,MAAM,EAAE;;cAE9B,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,EAAC;cACrD,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,iBAAiB,CAAC,QAAQ,GAAG,OAAO,GAAG,qBAAqB,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,aAAa,IAAI,WAAW,GAAG,CAAC,CAAC,CAAC;cACxI,MAAM,CAAC,IAAI,CAAC,KAAK,EAAC;aACnB;;YAED,GAAG,CAAC,MAAM,GAAG,OAAM;YACnB,QAAQ,GAAE;WACX;;UAED,WAAW,GAAE;SACd;OACF;KACF;GACF;;EAED,SAAS,CAAC,CAAC,UAAU,EAAE,EAAE,EAAE;IACzB,IAAI,UAAU,EAAE,EAAE,KAAK,IAAI,CAAC,IAAI,UAAU,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE;IAC3E,OAAO,IAAI;GACZ;;EAED,aAAa,CAAC,CAAC,MAAM,EAAE,mBAAmB,EAAE;IAC1C,IAAI,CAAC,GAAG,CAAC,mBAAmB,GAAG,MAAM,CAAC,EAAE,GAAG,eAAe,GAAG,MAAM,CAAC,KAAK,GAAG,GAAG,EAAC;;;IAGhF,IAAI,YAAY,GAAG,oBAAmB;;;IAGtC,MAAM,CAAC,gBAAgB,GAAG,EAAC;;;IAG3B,IAAI,QAAQ,GAAG,EAAC;IAChB,IAAI,SAAS,GAAG,KAAI;;;IAGpB,MAAM,CAAC,aAAa,GAAG,GAAE;IACzB,KAAK,IAAI,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,2DAA2D,CAAC,EAAE;MACjG,KAAK,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,GAAG;QAC1B,IAAI,KAAK,GAAG,KAAI;QAChB,KAAK,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,0BAA0B,CAAC,GAAG;;UAErD,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAC;SACxC,MAAM,KAAK,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG;;UAE3C,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,gBAAgB,EAAE,MAAM,CAAC,gBAAgB,EAAE,EAAE,EAAC;SACvJ,MAAM,KAAK,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,gCAAgC,CAAC,GAAG;;UAElE,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,IAAG;;;UAG3B,IAAI,OAAO,GAAG,KAAK,CAAC,CAAC,EAAC;UACtB,IAAI,OAAO,KAAK,EAAE,EAAE,OAAO,GAAG,IAAG;UACjC,IAAI,OAAO,KAAK,GAAG,EAAE,OAAO,GAAG,KAAI;UACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,4CAA4C,CAAC,EAAE,MAAM,IAAI,iBAAiB,CAAC,6CAA6C,GAAG,OAAO,CAAC;;;UAGtJ,IAAI,WAAW,GAAG,KAAK,CAAC,CAAC,EAAC;UAC1B,IAAI,KAAK,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,GAAE;UACvE,KAAK,IAAI,IAAI,IAAI,WAAW,CAAC,KAAK,CAAC,wBAAwB,CAAC,EAAE;YAC5D,IAAI,IAAI,CAAC,IAAI,EAAE,EAAE;cACf,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE;;gBAE9B,IAAI,KAAK,CAAC,SAAS,EAAE,MAAM,IAAI,iBAAiB,CAAC,aAAa,GAAG,KAAK,CAAC,SAAS,GAAG,gBAAgB,GAAG,IAAI,GAAG,sDAAsD,GAAG,KAAK,CAAC;gBAC5K,IAAI,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,iBAAiB,CAAC,+BAA+B,GAAG,IAAI,GAAG,sDAAsD,GAAG,KAAK,CAAC;gBAClJ,IAAI,KAAK,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,8EAA8E,GAAG,KAAK,CAAC;gBACrI,KAAK,CAAC,MAAM,GAAG,KAAI;eACpB,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAE;;gBAElC,IAAI,KAAK,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,mBAAmB,GAAG,IAAI,GAAG,sDAAsD,GAAG,KAAK,CAAC;gBACtK,IAAI,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,iBAAiB,CAAC,kCAAkC,GAAG,IAAI,GAAG,sDAAsD,GAAG,KAAK,CAAC;gBACrJ,IAAI,KAAK,CAAC,SAAS,EAAE,MAAM,IAAI,iBAAiB,CAAC,oEAAoE,GAAG,KAAK,CAAC;gBAC9H,KAAK,CAAC,SAAS,GAAG,KAAI;eACvB,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;;gBAE7B,IAAI,KAAK,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,qBAAqB,GAAG,IAAI,GAAG,sDAAsD,GAAG,KAAK,CAAC;gBACxK,IAAI,KAAK,CAAC,SAAS,EAAE,MAAM,IAAI,iBAAiB,CAAC,aAAa,GAAG,KAAK,CAAC,SAAS,GAAG,qBAAqB,GAAG,IAAI,GAAG,sDAAsD,GAAG,KAAK,CAAC;gBACjL,IAAI,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,iBAAiB,CAAC,oEAAoE,GAAG,KAAK,CAAC;gBACvH,KAAK,CAAC,EAAE,GAAG,KAAI;eAChB,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;;gBAE5B,IAAI,KAAK,CAAC,MAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,6DAA6D,GAAG,KAAK,CAAC;gBACpH,KAAK,CAAC,MAAM,GAAG,KAAI;eACpB,MAAM,MAAM,IAAI,iBAAiB,CAAC,gBAAgB,GAAG,IAAI,GAAG,mCAAmC,GAAG,KAAK,GAAG,GAAG,CAAC;aAChH;WACF;;;UAGD,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,gBAAgB,EAAE,MAAM,CAAC,gBAAgB,EAAE,EAAE,EAAC;SAC5J,MAAM,MAAM,IAAI,iBAAiB,CAAC,iBAAiB,GAAG,KAAK,GAAG,2CAA2C,GAAG,QAAQ,IAAI,SAAS,GAAG,WAAW,GAAG,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC;;QAE1K,SAAS,GAAG,MAAK;OAClB;;MAED,QAAQ,IAAI,KAAK,CAAC,OAAM;KACzB;;;IAGD,MAAM,CAAC,QAAQ,GAAG,EAAC;IACnB,KAAK,IAAI,CAAC,IAAI,MAAM,CAAC,aAAa,EAAE,MAAM,CAAC,QAAQ,IAAI,CAAC,CAAC,SAAQ;GAClE;;EAED,eAAe,CAAC,CAAC,GAAG,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS,EAAE;;IAEvE,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,IAAI,iBAAiB,CAAC,4CAA4C,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,aAAa,CAAC;IACxI,OAAO,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,gBAAgB,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;;IAE1G,IAAI,MAAM,GAAG,EAAC;IACd,KAAK,IAAI,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,aAAa,EAAE;;MAEzC,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAC;MAC7C,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,iBAAiB,CAAC,iCAAiC,IAAI,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;;;MAGxG,IAAI,SAAS,KAAK,KAAK,IAAI,MAAM,GAAG,WAAW,KAAK,CAAC,EAAE,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAQ;;;;WAIjH,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,KAAK,KAAK,IAAI,CAAC,WAAW,EAAE,EAAC;;MAE9G,SAAS,GAAG,MAAK;MACjB,MAAM,IAAI,IAAI,CAAC,SAAQ;KACxB;;IAED,OAAO,SAAS;GACjB;;EAED,WAAW,CAAC,CAAC,IAAI,EAAE,iBAAiB,EAAE,WAAW,EAAE;IACjD,IAAI,QAAQ,GAAG,GAAE;IACjB,IAAI,MAAM,GAAG,EAAC;;;IAGd,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,EAAE,EAAE,OAAO,CAAC,KAAK,EAAE,EAAE,EAAC;;;IAGpD,IAAI,CAAC,MAAM,GAAG,GAAE;IAChB,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,iCAAiC,CAAC,EAAE;MACrE,IAAI,KAAK,GAAG,KAAI;;MAEhB,KAAK,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,iBAAiB,EAAE,WAAW,EAAC;;;WAGhK,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,MAAM,EAAE,WAAW,IAAI,MAAM,GAAG,WAAW,CAAC,EAAE,WAAW,EAAC;;;WAGlH,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAC;KACxF;;;IAGD,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,KAAK,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,MAAM,EAAE,WAAW,IAAI,MAAM,GAAG,WAAW,CAAC,EAAE,WAAW,EAAC;;;IAG1K,IAAI,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,OAAM;IACjD,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,uBAAuB,GAAG,eAAe,GAAG,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,GAAG,MAAM,GAAG,MAAM,IAAI,eAAe,GAAG,WAAW,CAAC,GAAG,eAAe,EAAC;IACrL,IAAI,eAAe,GAAG,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,eAAe,GAAG,WAAW,CAAC,GAAG,SAAS,IAAI,CAAC,eAAe,GAAG,WAAW,GAAG,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,CAAC,eAAe,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC,GAAG,YAAY,EAAC;IACzO,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,MAAM,EAAE,eAAe,EAAE,WAAW,EAAC;;IAEvE,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;;MAE7B,IAAI,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,EAAC;;;MAGhD,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,QAAQ,GAAG,WAAW,CAAC,EAAC;;;MAG/F,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,SAAQ;;;MAGrC,KAAK,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,IAAI,WAAW,KAAK,EAAC;;;MAG/D,KAAK,CAAC,YAAY,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,GAAE;KAC/D;;;IAGD,IAAI,CAAC,IAAI,GAAG,EAAC;IACb,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,EAAC;;;IAGvE,MAAM,GAAG,EAAC;IACV,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;MACpC,KAAK,IAAI,aAAa,IAAI,MAAM,CAAC,YAAY,EAAE;;QAE7C,IAAI,KAAK,GAAG,KAAI;QAChB,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM,EAAE,KAAK,GAAG,EAAC,EAAE;QAChE,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,mCAAmC,GAAG,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,eAAe,GAAG,MAAM,GAAG,QAAQ,CAAC;;;QAGjI,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,EAAE,EAAC;;QAEhG,MAAM,IAAI,aAAa,CAAC,SAAQ;OACjC;KACF;;;IAGD,MAAM,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,GAAE;IAClC,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;MACpC,KAAK,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE;QAC3B,KAAK,IAAI,gBAAgB,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE;UAC9C,KAAK,IAAI,aAAa,IAAI,GAAG,CAAC,YAAY,CAAC,gBAAgB,CAAC,EAAE;;YAE5D,IAAI,KAAK,GAAG,KAAI;YAChB,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,gBAAgB,CAAC,EAAE,KAAK,GAAG,EAAC,EAAE;YAClF,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,mCAAmC,GAAG,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,eAAe,GAAG,MAAM,CAAC,gBAAgB,CAAC,GAAG,QAAQ,CAAC;;;YAGnJ,KAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,EAAE,EAAC;;YAE1H,MAAM,CAAC,gBAAgB,CAAC,IAAI,aAAa,CAAC,SAAQ;WACnD;SACF;OACF;KACF;;;IAGD,IAAI,SAAS,GAAG,kBAAkB,GAAG,IAAI,CAAC,IAAI,GAAG,OAAM;IACvD,IAAI,QAAQ,GAAG,EAAC;IAChB,IAAI,YAAY,GAAG,MAAK;IACxB,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;MAC7B,SAAS,IAAI,QAAQ,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,MAAM,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,wBAAwB,GAAG,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,YAAY,GAAG,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,OAAM;MACrX,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,EAAE,YAAY,GAAG,KAAI;MAC7C,IAAI,KAAK,CAAC,GAAG,EAAE;QACb,QAAQ,GAAE;QACV,SAAS,IAAI,MAAK;OACnB;MACD,SAAS,IAAI,KAAI;KAClB;IACD,SAAS,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAC;IAC9C,IAAI,CAAC,GAAG,CAAC,SAAS,EAAC;;IAEnB,IAAI,YAAY,EAAE,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC;;IAEnE,OAAO,QAAQ;GAChB;;EAED,WAAW,CAAC,CAAC,IAAI,EAAE,oBAAoB,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,EAAE;IAC1E,IAAI,QAAQ,GAAG,GAAE;;;IAGjB,IAAI,QAAQ,GAAG,EAAC;IAChB,IAAI,UAAU,GAAG,EAAC;IAClB,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;;MAE7B,KAAK,CAAC,QAAQ,GAAG,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,OAAM;MACxD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAC;;;;MAIpD,IAAI,cAAc,GAAG,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAC;;;MAGzD,IAAI,SAAS,GAAG,KAAI;MACpB,IAAI,oBAAoB,GAAG,CAAC,EAAE,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,oBAAoB,IAAI,cAAc,GAAG,CAAC,GAAG,CAAC,EAAC;MACtH,IAAI,SAAS,EAAE,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,EAAC;;;MAG/D,IAAI,SAAS,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,EAAC;MACjC,IAAI,KAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,EAAE,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,SAAS,IAAI,KAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAM,EAAE;MACpL,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,cAAc,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,EAAC;MACtF,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,EAAC;;;MAGhD,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,QAAQ,IAAI,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,GAAG,EAAC;;;MAGxG,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,IAAI,KAAK,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,GAAG,KAAK,GAAG,GAAG,KAAK,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,EAAC;;;MAGpI,IAAI,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,KAAK,CAAC,IAAI,IAAI,OAAM;;MAEjF,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,kBAAkB,IAAI,UAAU,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,OAAO,GAAG,KAAK,CAAC,MAAM,GAAG,eAAe,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,GAAG,SAAS,GAAG,OAAO,IAAI,SAAS,IAAI,KAAK,CAAC,GAAG,GAAG,EAAC;MAC5P,QAAQ,IAAI,UAAS;;MAErB,UAAU,GAAE;MACZ,IAAI,KAAK,CAAC,GAAG,EAAE,QAAQ,GAAE;KAC1B;;;IAGD,IAAI,CAAC,gBAAgB,EAAE,OAAO,QAAQ;;;IAGtC,IAAI,YAAY,GAAG,GAAE;IACrB,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;MAC7B,IAAI,6BAA6B,GAAG,EAAC;MACrC,IAAI,0BAA0B,GAAG,EAAC;;;MAGlC,KAAK,IAAI,WAAW,IAAI,KAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,EAAE,6BAA6B,IAAI,WAAW,CAAC,IAAI,CAAC,OAAM;;MAEtH,KAAK,IAAI,WAAW,IAAI,KAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,EAAE;;QAE5D,IAAI,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,MAAM,EAAC;QACpG,IAAI,cAAc,GAAG,cAAa;;;QAGlC,OAAO,aAAa,GAAG,6BAA6B,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,aAAa,GAAE,EAAE;;;QAG9G,OAAO,aAAa,GAAG,0BAA0B,GAAG,CAAC,EAAE,EAAE,aAAa,GAAE,EAAE;;QAE1E,IAAI,CAAC,GAAG,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,gBAAgB,GAAG,KAAK,CAAC,MAAM,GAAG,gBAAgB,GAAG,KAAK,CAAC,QAAQ,GAAG,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,eAAe,GAAG,WAAW,CAAC,MAAM,GAAG,8CAA8C,GAAG,aAAa,GAAG,oBAAoB,GAAG,cAAc,GAAG,SAAS,EAAC;QAC1U,YAAY,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,CAAC,IAAI,EAAE,MAAM,EAAE,WAAW,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,GAAG,aAAa,EAAE,EAAC;;QAEnH,0BAA0B,GAAG,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,OAAM;QACpE,6BAA6B,IAAI,WAAW,CAAC,IAAI,CAAC,OAAM;OACzD;KACF;;IAED,KAAK,IAAI,WAAW,IAAI,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,kBAAkB,GAAG,WAAW,CAAC,IAAI,GAAG,KAAK,GAAG,WAAW,CAAC,MAAM,GAAG,WAAW,GAAG,WAAW,CAAC,QAAQ,GAAG,QAAQ,EAAC;;;IAGpL,IAAI,QAAQ,GAAG,EAAC;IAChB,IAAI,IAAI,GAAG,EAAC;IACZ,IAAI,SAAS,GAAG,SAAQ;IACxB,IAAI,SAAS,GAAG,GAAE;IAClB,QAAQ,GAAG,GAAE;IACb,KAAK,IAAI,IAAI,IAAI,SAAS,EAAE;MAC1B,IAAI,IAAI,KAAK,IAAI,EAAE;QACjB,QAAQ,IAAI,KAAI;QAChB,SAAS,IAAI,KAAI;QACjB,IAAI,GAAG,EAAC;OACT,MAAM;QACL,KAAK,IAAI,WAAW,IAAI,YAAY,EAAE;UACpC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;YACzB,IAAI,WAAW,CAAC,QAAQ,IAAI,QAAQ,EAAE;cACpC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,cAAc,GAAG,WAAW,CAAC,IAAI,GAAG,KAAK,GAAG,QAAQ,GAAG,QAAQ,EAAC;cAC3F,SAAS,IAAI,WAAW,CAAC,KAAI;cAC7B,WAAW,CAAC,QAAQ,GAAG,KAAI;cAC3B,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,OAAM;aAC/B;WACF;SACF;;QAED,QAAQ,GAAE;;;;QAIV,IAAI,IAAI,KAAK,CAAC,EAAE,EAAE,SAAS,IAAI,IAAI,KAAK,GAAG,GAAG,IAAI,GAAG,IAAG,EAAE,MAAM,EAAE,IAAI,GAAE,EAAE;QAC1E,QAAQ,IAAI,IAAI,KAAK,GAAG,IAAI,EAAE,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,KAAI;OACnE;KACF;;;IAGD,OAAO,KAAK,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,gBAAgB,CAAC;GACpE;;EAED,aAAa,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE;IAC9C,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC;;IAEjF,OAAO,IAAI,GAAG,CAAC,EAAE;;MAEf,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,WAAW,IAAI,MAAM,GAAG,WAAW,CAAC,EAAC;;;MAGtE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,oBAAoB,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAC;;;MAGnK,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,IAAI,YAAW;MAC3D,MAAM,IAAI,YAAW;MACrB,IAAI,IAAI,YAAW;;;MAGnB,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAC;KACjG;;IAED,OAAO,MAAM;GACd;;EAED,cAAc,CAAC,CAAC,KAAK,EAAE;;;;;IAKrB,OAAO,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM;GACjD;;EAED,eAAe,CAAC,CAAC,aAAa,EAAE;;IAE9B,IAAI,aAAa,CAAC,MAAM,EAAE,OAAO,GAAG;;;IAGpC,OAAO,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG;GACtC;CACF;;;;;;AAMD,AAAO,MAAM,QAAQ,CAAC;EACpB,WAAW,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE;IAC7B,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,KAAK,EAAC;IACrC,IAAI,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAC;GACnC;;EAED,GAAG,CAAC,CAAC,SAAS,EAAE;IACd,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,mBAAmB,CAAC,EAAC;IACpD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAC;GACzE;;EAED,WAAW,CAAC,CAAC,IAAI,EAAE;IACjB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,EAAC;IAC5D,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;GACnG;;EAED,WAAW,CAAC,CAAC,IAAI,EAAE,oBAAoB,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,EAAE;IAC1E,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE,oBAAoB,CAAC,UAAU,EAAE,KAAK,CAAC,qBAAqB,EAAE,gBAAgB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAC;IAClM,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,oBAAoB,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,CAAC;GACjG;;EAED,WAAW,CAAC,CAAC,IAAI,EAAE,oBAAoB,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,EAAE;;IAE1E,IAAI,IAAI,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,GAAE;;IAE1C,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC,IAAI,CAAC,EAAC;IACjE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,EAAC;;IAE3F,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,qBAAqB,EAAE,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE,oBAAoB,CAAC,UAAU,EAAE,KAAK,CAAC,qBAAqB,EAAE,gBAAgB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAC;IACvM,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,oBAAoB,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,CAAC;GACjG;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChjBD,cAAc,GAAG;EACf,MAAM,EAAE,UAAsB;EAC9B,YAAY,EAAE,UAA4B;EAC1C,UAAU,EAAE,UAA0B;EACtC,WAAW,EAAE,UAA2B;EACxC,YAAY,EAAE,UAA4B;EAC1C,aAAa,EAAE,UAA6B;EAC5C,OAAO,EAAE,UAAuB;EAChC,WAAW,EAAE,UAA2B;EACxC,iBAAiB,EAAE,UAAiC;EACpD,QAAQ,EAAE,UAAwB;EAClC,QAAQ,EAAE,WAAwB;EAClC,SAAS,EAAE,WAAyB;EACpC,eAAe,EAAE,WAA+B;EAChD,YAAY,EAAE,WAA4B;EAC1C,YAAY,EAAE,WAA4B;EAC1C,gBAAgB,EAAE,WAAgC;EAClD,YAAY,EAAE,WAA4B;EAC1C,eAAe,EAAE,WAA+B;EAChD,cAAc,EAAE,WAA8B;EAC9C,WAAW,EAAE,WAA2B;EACxC,UAAU,EAAE,WAA0B;EACtC,OAAO,EAAE,WAAuB;EAChC,OAAO,EAAE,WAAuB;EAChC,YAAY,EAAE,WAA4B;EAC1C,OAAO,EAAE,WAAuB;EAChC,SAAS,EAAE,WAAyB;EACpC,OAAO,EAAE,WAAuB;EAChC,QAAQ,EAAE,WAAwB;EAClC,QAAQ,EAAE,WAAwB;EAClC,WAAW,EAAE,WAA2B;EACxC,YAAY,EAAE,WAA4B;EAC1C,WAAW,EAAE,WAA2B;EACxC,UAAU,EAAE,WAA0B;EACtC,YAAY,EAAE,WAA4B;EAC1C,iBAAiB,EAAE,WAAiC;EACpD,OAAO,EAAE,WAAuB;EAChC,OAAO,EAAE,WAAuB;EAChC,gBAAgB,EAAE,WAAgC;EAClD,KAAK,EAAE,WAAqB;EAC5B,QAAQ,EAAE,WAAwB;EAClC,aAAa,EAAE,WAA6B;EAC5C,SAAS,EAAE,WAAyB;EACpC,UAAU,EAAE,WAA0B;EACtC,UAAU,EAAE,WAA0B;EACtC,eAAe,EAAE,WAA+B;EAChD,qBAAqB,EAAE,WAAqC;EAC5D,SAAS,EAAE,WAAyB;EACpC,YAAY,EAAE,WAA4B;EAC1C,cAAc,EAAE,WAA8B;EAC9C,WAAW,EAAE,WAA2B;EACxC,YAAY,EAAE,WAA4B;CAC3C;;ACjDM,MAAM,MAAM,CAAC;EAClB,WAAW,CAAC,CAAC,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE;IACpC,IAAI,CAAC,WAAW,GAAG,EAAC;IACpB,IAAI,CAAC,SAAS,GAAG,EAAC;IAClB,IAAI,CAAC,WAAW,GAAG,EAAC;;IAEpB,MAAM,GAAG,MAAM,IAAI,GAAE;IACrB,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,IAAI,GAAE;IACzC,MAAM,CAAC,SAAS,CAAC,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,IAAI,GAAE;;;IAGnD,IAAI,CAAC,QAAQ,GAAG,SAAQ;;;IAGxB,IAAI,CAAC,KAAK,GAAG,MAAK;;;IAGlB,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,IAAI,MAAK;IAChC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,KAAI;IACnC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,IAAI,YAAY,GAAE;;;IAGvD,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,IAAI,EAAC;IAC5B,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,IAAI,IAAG;IAC1C,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,IAAI,EAAC;IACzD,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,IAAI,KAAI;IAC9D,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,MAAK;;;IAG1F,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,CAAC,MAAM;MACpC,MAAM;MACN,MAAM;MACN,MAAM;MACN,MAAM;MACN,KAAK;MACN;;;IAGD,IAAI,CAAC,OAAO,GAAG,KAAI;IACnB,IAAI,CAAC,MAAM,GAAG,MAAK;;;IAGnB,IAAI,CAAC,KAAK,CAAC,GAAG,EAAC;IACf,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAC;IAChB,IAAI,CAAC,SAAS,CAAC,EAAE,EAAC;IAClB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAC;IAC9B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,OAAO,EAAC;GACrC;;EAED,mBAAmB,CAAC,CAAC,MAAM,EAAE;IAC3B,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,QAAQ,GAAG,MAAM,GAAG,GAAE;IAChD,IAAI,QAAQ,GAAG,MAAK;IACpB,IAAI,KAAK,GAAG,IAAI,YAAY,CAAC,QAAQ,EAAC;IACtC,IAAI,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,IAAG;IACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,EAAE,CAAC,EAAE;MACjC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,QAAQ,GAAG,EAAC;MAC5B,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC;KAChE;IACD,OAAO,KAAK;GACb;;;;;;;;;EASD,KAAK,CAAC,CAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE;IACnE,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAQ;IAC5B,IAAI,QAAQ,GAAG,QAAQ,CAAC,UAAU,GAAE;IACpC,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,OAAM;;IAE5B,IAAI,UAAU,EAAE;MACd,IAAI,SAAS,GAAG,QAAQ,CAAC,gBAAgB,GAAE;MAC3C,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,UAAU,EAAE,EAAE,CAAC,EAAC;MACpE,SAAS,CAAC,UAAU,GAAG,KAAI;MAC3B,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAC;MACvC,QAAQ,CAAC,OAAO,CAAC,SAAS,EAAC;KAC5B,MAAM,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAC;;IAE7C,IAAI,UAAU,GAAG,QAAQ,CAAC,gBAAgB,GAAE;IAC5C,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAC;;IAE5B,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,UAAS;IACtC,UAAU,CAAC,OAAO,GAAG,QAAO;;;IAG5B,IAAI,UAAU,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,eAAe,CAAC,QAAQ,CAAC,kBAAkB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAC;SACtH,UAAU,CAAC,IAAI,GAAG,KAAI;;IAE3B,UAAU,CAAC,KAAK,CAAC,IAAI,EAAC;IACtB,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,QAAQ,EAAC;GACjC;;EAED,iBAAiB,CAAC,CAAC,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE;IAC5C,IAAI,KAAK,GAAG,GAAE;IACd,KAAK,IAAI,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE;MAChD,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC;KACvG;IACD,OAAO,KAAK;GACb;;EAED,GAAG,CAAC,CAAC,IAAI,EAAE;;IAET,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAS;;;IAGxC,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,OAAO,EAAE;MAClD,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,GAAG,IAAI,OAAM;WACpD,GAAG,IAAI,OAAM;KACnB;;IAED,OAAO,GAAG;GACX;;EAED,KAAK,CAAC,CAAC,IAAI,EAAE;IACX,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAQ;IAC5B,IAAI,IAAI,GAAG,KAAI;;;IAGf,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,EAAE;MAC/B,IAAI,CAAC,WAAW,GAAG,KAAI;MACvB,OAAO,IAAI;KACZ;;;IAGD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,KAAK;IAC7B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAC;IACrC,IAAI,CAAC,IAAI,EAAE,OAAO,KAAK;;IAEvB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,KAAK,EAAC;IAC7B,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAC;IAClE,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,KAAI;IAClE,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,KAAI;IACpE,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,EAAC;;;IAGvE,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;;;IAGvC,KAAK,IAAI,aAAa,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAC;;;IAG5K,IAAI,MAAM,GAAG,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,EAAC;IACzC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,IAAI,IAAG;IACpC,IAAI,IAAI,CAAC,IAAI,EAAE,MAAM,GAAG,EAAC;;;IAGzB,IAAI,KAAK,GAAG,CAAC,GAAG,GAAG,GAAG,EAAC;IACvB,IAAI,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,EAAC;SACnB,IAAI,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,IAAG;;;IAGhC,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG,IAAI,CAAC,MAAK;;;;IAI9D,IAAI,YAAY,GAAG,KAAK,IAAI,IAAI,CAAC,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAC;;;IAGzE,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,CAAC,IAAI,GAAG,SAAQ;IACvC,IAAI,UAAU,GAAG,KAAK,GAAG,IAAI,CAAC,UAAU,GAAG,KAAI;;;IAG/C,IAAI,KAAK,IAAI,IAAI,CAAC,OAAO,EAAE;;MAEzB,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,EAAC;;;MAGhI,IAAI,IAAI,EAAE,KAAK,GAAG,KAAK,CAAC,OAAO,GAAE;;;;;;MAMjC,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAE,MAAM,IAAI,EAAC;KAC9C;;;IAGD,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,OAAM;;;IAGzD,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,MAAM,GAAG,GAAG,GAAG,EAAE,CAAC,IAAI,IAAI,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,EAAC;IACzJ,IAAI,OAAO,GAAG,CAAC,KAAK,GAAG,OAAO,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,GAAG,EAAE,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,WAAW,IAAI,MAAM,GAAG,GAAG,CAAC,GAAG,IAAI,IAAI,KAAK,GAAG,QAAQ,IAAI,MAAM,GAAG,SAAS,GAAG,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,WAAW,GAAG,EAAE,EAAC;IACpS,UAAU,CAAC,YAAY,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,EAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC,GAAG,IAAI,EAAC;;;IAGlG,IAAI,IAAI,CAAC,IAAI,EAAE;MACb,IAAI,CAAC,KAAK,CAAC,IAAI,EAAC;MAChB,MAAM;KACP;;;IAGD,IAAI,MAAM,GAAG,EAAC;IACd,IAAI,KAAK,GAAG,EAAC;IACb,KAAK,IAAI,SAAS,IAAI,KAAK,EAAE;;MAE3B,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,GAAG,MAAM,EAAE,CAAC,YAAY,GAAG,KAAK,IAAI,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,GAAG,YAAY;;QAErJ,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;UACtC,IAAI,CAAC,IAAI,GAAE;UACX,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,GAAE;SAC/B,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,GAAG,MAAM,EAAC;OACtC,EAAC;;;;MAIF,KAAK,KAAK,aAAa,GAAG,CAAC,YAAY,GAAG,IAAI,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC,EAAC;;;MAGtF,MAAM,IAAI,KAAI;;MAEd,MAAM,GAAE;KACT;GACF;;EAED,IAAI,CAAC,GAAG;IACN,IAAI,CAAC,OAAO,GAAG,KAAI;IACnB,IAAI,CAAC,MAAM,GAAG,MAAK;IACnB,IAAI,IAAI,CAAC,EAAE,EAAE;MACX,YAAY,CAAC,IAAI,CAAC,EAAE,EAAC;MACrB,IAAI,CAAC,WAAW,GAAE;KACnB;GACF;;EAED,KAAK,CAAC,GAAG;IACP,IAAI,CAAC,OAAO,GAAG,MAAK;IACpB,IAAI,CAAC,MAAM,GAAG,KAAI;IAClB,IAAI,IAAI,CAAC,EAAE,EAAE;MACX,YAAY,CAAC,IAAI,CAAC,EAAE,EAAC;MACrB,IAAI,CAAC,WAAW,GAAE;KACnB;GACF;;EAED,IAAI,CAAC,CAAC,SAAS,EAAE;IACf,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAQ;IAC5B,IAAI,IAAI,GAAG,KAAI;;IAEf,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,GAAG,EAAC;IACpC,IAAI,CAAC,OAAO,GAAG,MAAK;IACpB,IAAI,CAAC,MAAM,GAAG,MAAK;;IAEnB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAC;IAC3B,IAAI,SAAS,EAAE,IAAI,CAAC,EAAE,GAAG,UAAU,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,EAAC,EAAE,EAAE,IAAI,EAAC;SAC9E;;MAEH,IAAI,MAAM,GAAG,EAAC;MACd,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;QAC3B,IAAI,CAAC,MAAM,GAAG,OAAM;QACpB,MAAM,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,EAAC;OAC3F;;MAED,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,EAAC;KACjC;GACF;;EAED,MAAM,CAAC,GAAG;IACR,IAAI,IAAI,CAAC,OAAO,EAAE,MAAM;;IAExB,IAAI,IAAI,CAAC,MAAM,EAAE;MACf,IAAI,CAAC,SAAS,GAAG,EAAC;MAClB,MAAM;KACP;;IAED,IAAI,IAAI,GAAG,KAAI;IACf,IAAI,CAAC,WAAW,GAAG,MAAK;IACxB,IAAI,CAAC,IAAI,GAAE;IACX,IAAI,MAAM,GAAG,YAAY;MACvB,IAAI,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,GAAE;WAC5B,UAAU,CAAC,MAAM,EAAE,GAAG,EAAC;MAC7B;IACD,MAAM,GAAE;GACT;;EAED,QAAQ,CAAC,GAAG;IACV,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;GACvD;;EAED,KAAK,CAAC,CAAC,GAAG,EAAE;IACV,IAAI,GAAG,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,GAAG,GAAG,CAAC;;IAEhE,IAAI,CAAC,QAAQ,GAAG,IAAG;;;IAGnB,IAAI,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,KAAK,EAAC;IAC5D,IAAI,CAAC,SAAS,GAAG,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAC;IAC9D,OAAO,CAAC,IAAI,CAAC,iBAAiB,GAAG,SAAS,GAAG,YAAY,EAAC;GAC3D;;EAED,OAAO,CAAC,CAAC,IAAI,EAAE;IACb,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAC;GAChD;;EAED,QAAQ,CAAC,CAAC,IAAI,EAAE;IACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAC;GAC/C;;EAED,OAAO,CAAC,CAAC,IAAI,EAAE;IACb,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAC;IAC9B,OAAO,CAAC,IAAI,CAAC,sBAAsB,GAAG,IAAI,EAAC;GAC5C;;EAED,OAAO,CAAC,CAAC,IAAI,EAAE;IACb,IAAI,CAAC,IAAI,GAAG,KAAI;IAChB,OAAO,CAAC,IAAI,CAAC,sBAAsB,GAAG,IAAI,EAAC;GAC5C;;EAED,QAAQ,CAAC,CAAC,CAAC,EAAE;IACX,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAC;IACjC,OAAO,CAAC,IAAI,CAAC,uBAAuB,GAAG,CAAC,EAAC;GAC1C;;EAED,SAAS,CAAC,CAAC,CAAC,EAAE;IACZ,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAC;IAC7B,OAAO,CAAC,IAAI,CAAC,wBAAwB,GAAG,CAAC,EAAC;GAC3C;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7TD;;AAEA,IAAI,CAAC,GAAG,MAAM,CAAC,OAAM;;;AAGrB,IAAI,QAAQ,GAAG,KAAK,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,kBAAkB,IAAI,MAAM,CAAC,YAAY,IAAG;;;AAG9F,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,OAAO,CAAC,MAAM,CAAC,EAAC;AAChE,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAC;AACtC,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAG;AAC5B,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC,EAAE,EAAE,SAAS,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAC;;;AAGhF,IAAI,KAAK,GAAG,GAAE;AACd,KAAK,IAAI,IAAI,IAAI,SAAS,CAAC,SAAS,EAAE;EACpC,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;IACpC,KAAK,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE;MAC3B,KAAK,IAAI,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,aAAa,EAAE;QACzC,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC;QAClD,WAAW,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAC;QACzE,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,iCAAiC,IAAI,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;QACxG,KAAK,CAAC,IAAI,CAAC,WAAW,EAAC;OACxB;KACF;GACF;CACF;;;AAGD,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,QAAQ,EAAE,KAAK,EAAE;EACvC,IAAI,EAAE,KAAK;EACX,IAAI,EAAE,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,CAAC;EAClC,SAAS,EAAE,SAAS,CAAC,SAAS;EAC9B,IAAI,EAAE,SAAS,CAAC,IAAI;CACrB,EAAC;;;AAGF,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;EAClC,MAAM,CAAC,KAAK,GAAE;EACd,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,GAAE;EAClB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,GAAE;CAClB,EAAC;;AAEF,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;EACxC,MAAM,CAAC,IAAI,GAAE;EACb,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,GAAE;EAClB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,GAAE;CAClB,CAAC;;;;"}